---
layout: post

title: "DesignPattern - Facade Pattern 알아보기"

categories: [DesignPattern]

---

<br>

하 Roam Research랑 ZettelKasten 넘 매력적인데 어려워ㅠ 글 정리할게 너무 많아졌다.

생각과 생각을 연결하니 주제도 너무 많아지고 있다.

<br>

사족은 그만하고, 오늘의 주제는 Facade Pattern 이다. 

SOLID 원칙을 해보려 했는데, 글을 쓰려면 이게 먼저 되어야 할것 같았다.

<br> 

우선 `Facade` 라는 말의 뜻을 먼저 보자

- 한글: 정면
- 영어 설명: The face or front of building

<br> 

뭔가가 먼저 뒤를 알기전에 맞이를 하는 역할을 한다는 것이다.

이 글을 보게 되면 아마

이게 이름이 Facade가 될 수 밖에 없구나! 찰떡이네! 싶을 것이다

<br> 

## 예시

<br>

적당한 예로 내가 택배를 붙이러 우체국이나 편의점에 갔다고 해보자.

그리고 신분증과 여러개의 물건을 가지고 있다. 

근데 나더러 알아서 신원 확인하고,

카드로 할지 현금으로 할지 알아서 결제하고

알아서 택배사도 지정하고 

배송 담당 지정도 너가 해 라고 한다면 어떨까?

상상만해도 끔찍하다.

<br>

실제로는 서비스를 이용하기 위해

우리를 맞이해주는 사람들이 있다.

프론트 데스크가 그런 역할을 하겠지?

<br>

프론트 데스크에 신분증을 제시하고 보낼 물건들과 도착지를 건내주면 

알아서 직원이 신원확인, 결제, 택배사 지정, 담당 기사 지정 등등 다 해준다

(신원확인은,, 음 그냥 한다고 하자!)

아무튼, 이처럼 우리를 편하게 해주는 사람들이 있다. 이게 `Facade`다

뒷 기능을 이용을 하지만 사용자로선 단순히 기능만 필요한 정보만 넘겨주면 된다.

그 뒤에 어떻게 처리하는지는 몰라도 된다.

<br>

## 코드 적용

<br>

이것을 조금더 단순화 해보자 

> "나는 `A`, `B`, `C`라는 정보를 이용할거야,
먼저 `B`로는 이거를 한다음에 `A`를 실행하고
끝나면 `C`정보를 이용해서 마무리를 지어!"

이것은 두가지로 나눌 수 있다.

1. 정보를 제공하는 부분
2. 정보를 이용하는 부분

그리고, 2에 대해선 대신 해주는 것이 있어야 사용자 입장에선 편하므로

이렇게 수정해보자.

1. `Facade`를 이용하여 정보를 제공

<br>

소스코드 상으로도 훠어얼씬 깔끔해지겠지?

코드로 한번 봐보자 (말도 안되는 코드를 쓸 예정, 느낌만 알자 ㅠ)

우선 a,b,c로 이런 액션들을 할 수 있다. 

```swift
func aAction(item: Int) {
    print(item)
}

func bAction(item: [Int], handler: (()->())) {
    print(item)
    handler()
}

func cAction(item: String) {
    print(item)
}
```

그리고 

1. 정보를 제공하는 부분
2. 정보를 이용하는 부분

를 코드로 보자

```swift
// 제공할 a,b,c
let a = 1
let b = [1,2,3]
let c = "String!"

// 먼저 B로 이거 하고!
bAction(item: b) {
    // 그 다음에 A 하고!
    aAction(item: a)
    // 그리고 C로 해!
    cAction(item: c)
}
```

여기서 중요한 것은 제공하는 부분에서 로직에 대해서도 빠삭하게 알아야한다는 것이다.

이게 단순해서 그렇지, 정말 정말 정말 복잡하고 복잡한거라면? 오 끔찍하다.

<br>

그래서 `Facade`를 도입해보자.

```swift
struct HotelFacade {
    let a: Int
    let b: [Int]
    let c: String
    
    func doIt() {
        // 먼저 B로 이거 하고!
        bAction(item: b) {
            // 그 다음에 A 하고!
            aAction(item: a)
            // 그리고 C로 해!
            cAction(item: c)
        }
    }
}
```

초기화 구문은 구조체니까 알아서 멤버와이즈 초기화 구문이 작성될테니 따로 작성안하고,

함수는 `doIt()`이라는 것만 있다.

<br>

이제 이것을 반영하면 다음과 같을 것이다.

```swift
// 제공할 a,b,c
let a = 1
let b = [1,2,3]
let c = "String!"

// 정보 줄게
let hotelFacade = HotelFacade(a: a, b: b, c: c)

// 준비 됐어? 해줘 ㅠ 난 갈게!
hotelFacade.doIt()
```

이런 것이다!

<br>

## 결론

<br>

이제 좀 고급지게 설명해보자

퍼사드 패턴은 다루기 까다로운 로직들을 사용자에게 간단하게 이용할 수 있도록 해주는 것이다.

이때 사용자는 복잡한 로직을 알 필요가 없다.

<br>

이렇게 하면 장점은 무엇일까?

까다로운 로직들이 복잡해지더라도 사용자는 (코드상) 영향을 받지 않는다.

즉 종속성이 떨어지게 된다. 그에 따라오는 이점은 또 뭐가 있을까?

바로 재컴파일이 필요없다는 점이다. 그렇기에 빌드 속도도 조금은 나아지겠지?

<br>

이것이 `Facade` 패턴을 사용하는 이유이다!

끝!


