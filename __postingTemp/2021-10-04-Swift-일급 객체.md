---
layout: post

title: "일급 객체"

categories: [Swift]

---

<br>

오늘 정리할 내용은 일급 객체에 관해서이다.

은근~히 네이밍때문에 헷갈리게 만들었다.

<br>

영어로는 `First Class Citizen`라고 하는데,

이는 태그 같은 개념으로 생각하자. 

조건을 만족하는 객체들에 대해서

'너는 일급객체야' 라고 태그를 붙여준다고 생각하면 좋다.

> Citizen 대신 object, type, value 등등 다양하게 불리는 것 같다.

---

<br>

# 일급 객체의 조건

첫째, 변수 또는 상수로 할당이 가능하다.
둘째, 함수의 매개변수로 사용이 가능하다.
셋째, 함수의 리턴값으로 사용이 가능하다.

<br>

딱 읽었을 때 들었던 생각은 일반적으로 `Int`나 `Class` 등등 처럼 많이 사용하던거네? 싶었다.

그래서 이 많이 본 자료형들 가지곤 따로 일급 객체란 주제로 포스팅이 되지 않는 것 같다.

<br>

그렇지만 함수가 일급 객체 조건을 만족한다는 것에 대한 글은 넘쳐날까?

당연하지 않기 때문이겠지?

그게 가능한 언어가 있고 아닌 언어들이 있는데, 스위프트는 이를 만족하기때문에 

포스팅들이 많이 되나보다.

<br>

또한, 함수가 일급 객체로써 사용이 가능하다면 

그 언어는 `함수형 프로그래밍 언어` 라고도 부를 수 있다

<br>

만족을 한다는건 알았으니 어떻게 쓰일 수 있는지 보자.

<br> 

### 첫째, 변수 또는 상수로 할당이 가능하다.

우선, 일반적인 함수를 보자.

```swift
func hellowFunction() -> String {
    return "안녕?"
}
```

이렇게 생겼다.

<br>

이것을 `사용`할때 이렇게 쓴다.

```swift
let a = hellowFunction()
```

그러면 `a`에는 `Return`값인 `"안녕?"`이 저장된다.

<br>

이것은 사용이다. 사용의 포인트는 `함수명` + `소괄호`이다.

뒤에 소괄호 부분이 사용하겠다는 의미다. 

<br>

그렇다면 할당은 간단하다. 사용을 의미하는 소괄호를 제거해주면 된다.

```swift
let b = hellowFunction
```

<br> 

`a`와 `b`에 대해 출력을 해보면 다음과 같이 나온다.

```swift
print(a)
print(b)

---- 콘솔창
안녕?
(Function)
``` 

아주 친절하게 "b는 함수야" 라고 말해준다.

그럼, 이것을 다시 사용하고자 한다면?

위에 말했던 `소괄호`를 붙여주면 된다.

<br>

그리고 다시 한번 3가지 경우에 대해 출력을 해보면 다음과 같다.

```swift
let a = hellowFunction()
let b = hellowFunction
let c = b()

print(a)
print(b)
print(c)

---- 콘솔창
안녕?
(Function)
안녕?
```

<br>

### 둘째, 함수의 매개변수로 사용이 가능하다. 

<br>

함수에 입력 파라미터로 함수를 넣을 수 있다는 말이니깐, 생긴건 이렇게 생겼다.

```swift
func useParameter(function: ()->()) {
    // 사용은 어떻게? 소괄호 붙여서!
    function()

}
```

보통 같았으면 `String`, `Int` 같은 것들이 들어 갈 자리에

함수 뒷부분에 붙을만한 것들이 매개변수로서 들어가있다.

사용법은 주석과 같이 소괄호 붙여서 사용해주면 되는 거고

이 함수의 호출에 대해서 보면 다음과 같다.

```swift
useParameter(function: hellowFunction)
```
<br>

`hellowFunction`은 분명히 `함수`였고, 파라미터로 들어갔다.

그리고 `useParameter` 함수에서 받은 함수를 사용 했기때문에

콘솔창에 역시나 `"안녕?"`이 찍히게 된다.

<br>

이 같은 경우를 도대체 언제 쓰게 될지를 고민해보면 좋다.

함수라는 것은 결국의 하나의 로직이다.

함수 내에서 어떤 추가적인 로직을 하고 싶을때, 함수를 인자로써 받으면 좋다.

<br> 

단순하게 생각해서 "그냥,,, 추가적으로 쓰고 싶으면 함수에서 호출하면 되자나?" 

라고 생각이 들었다면, 이렇게 생각해보자

함수A내에서 특정 함수명B을 넣어버린다면, 함수A는 함수B에 맞춤형이 되어버린다.

즉, 다른 함수 C,D,E 동작에 대해서도 유연하게 대처 할 수 있다는 점이 매력 포인트!

> 이부분은 SOLID 원칙중 `OCP`를 떠올리게 해주는 것 같다.
> 확장에는 열려(open)있고, 변경에는 닫혀(closed)있도록 해라!!

<br>

### 셋째, 함수의 리턴값으로 사용이 가능하다.

고민을 해보았다. 

```swift
func returnFunction() -> ()->() {
    return hellowFunction
}
```

이라 하고 끝! 이라 하면 너무 성의 없을 거 같았다.

<br>

그래서 함수 두개 준비

```swift
// 1. 더하기
func add(x: Int, y: Int) -> Int {
    return x + y
}

// 2. 빼기
func sub(x: Int, y: Int) -> Int {
    return x - y
}
```

하나는 더하기 하는 함수, 하나는 빼기하는 함수다.

공통점은 두개의 `Int` 인자를 받고 하나의 `Int`로 리턴을 해준다.

<br>

자 이제 함수를 리턴하는 함수를 보자

```swift
func getFunction(operation: String) -> (Int,Int) -> Int {
    switch operation {
    case "+":
        return add
    case "-":
        return sub
    default:
        fatalError()
    }
}
```

아아주 간단하다
`+`를 인자로 넣으면 더하기 함수를 뱉고
`-`를 인자로 넣으면 빼기 함수를 뱉는다.


다음과 같은 코드를 작성해보자

```swift
var cal = getFunction(operation: "+")
print(cal(1,2))

cal = getFunction(operation: "-")
print(cal(5,1))

--- 콘솔창
3
4
```
<br>
이렇게하게 되면 

하나의 함수명을 갖고 있지만 서로 다른 역할을 한다.

계산기에 `+`, `-`와 같은 버튼이 눌렸을 때, 

동작하는 함수를 지정해주고

실제로 연산을 할때는 한가지 함수타입의 변수로 돌려쓰기가 가능하다.

<br>

음 만족스런 예제야

<br>

# 마무리

아무튼 이렇게해서 일급 객체에 대해서 알아보았다.

사실 3가지 조건외에도 더있다. 런타임시 생성이 가능해야한다느니, 비교 연산이 가능해야한다느니,,,

근데 런타임시 조건은 위키에도 나왔지만 그런 조건을 말하기도 한다! 라고 해서 제외 시켰고
비교 연산 같은 경우 Swift에선 권장되지 않는다고 하여서 제외하였다.

<br>

사실 이것이 나를 더 헷갈리게 만든건 클로저 때문이라

다음 포스팅은 클로저를 하고

그 다음 포스팅은 클로저와 일급객체로 해야겠다.

끝.
