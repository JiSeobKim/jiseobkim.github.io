<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="shortcut icon" href="/static/img/favicon.ico" />
    <title>(Swift) Test Doubleì´ë€ (á„‡á…®á„Œá…¦- Mock, Stub, SPY á„‹á…µá„…á…¥á†«á„€á…¦ á„†á…¯á„Œá…µ?) - ğŸ˜€ğŸ˜ğŸ˜‰ JS ê°œë°œ ë¸”ë¡œê·¸ ğŸ˜ğŸ˜†ğŸ˜„</title>
    <meta name="author" content="Jiseob Kim" />
    <meta name="description" content="(Swift) Test Doubleì´ë€ (á„‡á…®á„Œá…¦- Mock, Stub, SPY á„‹á…µá„…á…¥á†«á„€á…¦ á„†á…¯á„Œá…µ?)" />
    <meta name="keywords" content="(Swift) Test Doubleì´ë€ (á„‡á…®á„Œá…¦- Mock, Stub, SPY á„‹á…µá„…á…¥á†«á„€á…¦ á„†á…¯á„Œá…µ?), ğŸ˜€ğŸ˜ğŸ˜‰ JS ê°œë°œ ë¸”ë¡œê·¸ ğŸ˜ğŸ˜†ğŸ˜„, Swift" />
    <link rel="alternate" type="application/rss+xml" title="RSS" href="/feed.xml">
    <meta content="" property="fb:app_id">
    <meta content="ğŸ˜€ğŸ˜ğŸ˜‰ JS ê°œë°œ ë¸”ë¡œê·¸ ğŸ˜ğŸ˜†ğŸ˜„" property="og:site_name">

    

    
      <meta content="(Swift) Test Doubleì´ë€ (á„‡á…®á„Œá…¦- Mock, Stub, SPY á„‹á…µá„…á…¥á†«á„€á…¦ á„†á…¯á„Œá…µ?)" property="og:title">
      <meta content="article" property="og:type">
    

    
      <meta content="ë‚˜ë§Œì˜ ê³µê°„" property="og:description">
    

    
      <meta content="http://localhost:4000/swift/2022/02/06/Swift-Test-Double(%E1%84%87%E1%85%AE%E1%84%8C%E1%85%A6-Mock-&-Stub-&-SPY-%E1%84%8B%E1%85%B5%E1%84%85%E1%85%A5%E1%86%AB%E1%84%80%E1%85%A6-%E1%84%86%E1%85%AF%E1%84%8C%E1%85%B5-).html" property="og:url">
    

    
      <meta content="2022-02-06T00:00:00+09:00" property="article:published_time">
      <meta content="http://localhost:4000/about/" property="article:author">
    

    
      <meta content="http://localhost:4000/static/img/mainIcon2.png" property="og:image">
    

    
      
        <meta content="Swift" property="article:section">
      
    

    
      
    

    <meta name="twitter:card" content="summary">
    <meta name="twitter:site" content="@">
    <meta name="twitter:creator" content="@">

    
      <meta name="twitter:title" content="(Swift) Test Doubleì´ë€ (á„‡á…®á„Œá…¦- Mock, Stub, SPY á„‹á…µá„…á…¥á†«á„€á…¦ á„†á…¯á„Œá…µ?)">
    

    
      <meta name="twitter:url" content="http://localhost:4000/swift/2022/02/06/Swift-Test-Double(%E1%84%87%E1%85%AE%E1%84%8C%E1%85%A6-Mock-&-Stub-&-SPY-%E1%84%8B%E1%85%B5%E1%84%85%E1%85%A5%E1%86%AB%E1%84%80%E1%85%A6-%E1%84%86%E1%85%AF%E1%84%8C%E1%85%B5-).html">
    

    
      <meta name="twitter:description" content="ë‚˜ë§Œì˜ ê³µê°„">
    

    

    <!-- Font awesome icons -->
    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
    <!-- syntax highlighting CSS -->
    <link rel="stylesheet" href="/static/css/syntax.css">
    <!-- Bootstrap core CSS -->
    <link href="/static/css/bootstrap.min.css" rel="stylesheet">
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css?family=Roboto+Condensed:400,300italic,300,400italic,700&amp;subset=latin,latin-ext" rel="stylesheet" type="text/css">
    <!-- Custom CSS -->
    <link rel="stylesheet" href="/static/css/super-search.css">
    <link rel="stylesheet" href="/static/css/thickbox.css">
    <link rel="stylesheet" href="/static/css/projects.css">
    <link rel="stylesheet" href="/static/css/main.css">

    
  </head>
  <body>
    <div class="container">
      <div class="col-sm-3">
        <div class="fixed-condition">
          <a href="/"><img class="profile-avatar" src="/static/img/mainIcon2.png" height="75px" width="75px" /></a>
          <h1 class="author-name">Jiseob Kim</h1>
          
            <div class="profile-about">
              iOS Developer
            </div>
          
          <div class="social">
            <ul>
              
                <li><a href="https://github.com/JiSeobKim" target="_blank"><i class="fa fa-github"></i></a></li>
              
            </ul>
          </div>
          <div class="search" id="js-search">
            <input type="text" placeholder="ê¸€ ê²€ìƒ‰í•˜ê¸°" class="search__input form-control" id="js-search__input">
            <ul class="search__results" id="js-search__results"></ul>
          </div>
          <hr />
          <ul class="sidebar-nav">
            <strong>Navigation</strong>
            <li><a href="/">Home</a></li>
            
              <li><a class="about" href="/category/Swift">Category</a></li>
            
              <li><a class="about" href="/about/">About Me</a></li>
            
          </ul>
        </div>
        <!-- end /.fixed-condition -->
      </div>
      <div class="col-sm-8 col-offset-1 main-layout">
        <header class="post-header">
  <h1 class="post-title">(Swift) Test Doubleì´ë€ (á„‡á…®á„Œá…¦- Mock, Stub, SPY á„‹á…µá„…á…¥á†«á„€á…¦ á„†á…¯á„Œá…µ?)</h1>
</header>

<span class="time">06 Feb 2022</span>

  <span class="categories">
    &raquo; <a href="/category/Swift">Swift</a>
  </span>


<div class="content">
  <div class="post"><p>ê¸€ ì œëª© ë°©ì‹ì„ ì¡°ê¸ˆ ë°”ê¿” ë³´ê¸°ë¡œ í–ˆë‹¤!</p>

<p>ê¸€ì„ ì“°ë ¤í–ˆë˜ ì´ìœ ë¥¼ ë¶€ì œë¡œ ë‹¬ê¸°ë¡œ!</p>

<p><br /></p>

<p>ë³¸ë¡ ìœ¼ë¡œ ê°€ë³´ì</p>

<p><br /></p>

<p>ì ì  TDDì™€ ì•„í‚¤í…ì³ì— ê´€ì‹¬ì„ ê°–ë‹¤ ë³´ë‹ˆ</p>

<p>ì–´ë–¤ ìë£Œì—ì„œ <code class="language-plaintext highlighter-rouge">Stub</code>ê³¼ <code class="language-plaintext highlighter-rouge">Mock</code>ì— ëŒ€í•œ ì–˜ê¸°ê°€ ë‚˜ì™€ì„œ</p>

<p>í˜¼ë€ì´ ì™”ë‹¤.</p>

<p><br /></p>

<p>í…ŒìŠ¤íŠ¸ë¥¼ ì§„í–‰í•˜ë©´ì„œ í…ŒìŠ¤íŠ¸ ëŒ€ìƒ(SUT)ë¥¼ ì œì™¸í•˜ê³¤ ì—¬ê¸°ì„œ ì‹¤ì œ ê°ì²´ë¡œ ì“¸ í•„ìš” ì—†ìœ¼ë‹ˆ</p>

<p>ë‚˜ë¨¸ì§€ ì˜ì¡´ì„±ì€ ê°€ì§œ ê°ì²´ë¡œ ê½‚ì•„ ë‘ëŠ” ê·¸ëŸ°ê²Œ <code class="language-plaintext highlighter-rouge">Mock</code>ìœ¼ë¡œ ì•Œê³  ìˆì—ˆë‹¤.</p>

<p><br /></p>

<p>í•˜ì§€ë§Œ, ê·¸ë ‡ì§€ ì•Šì•˜ë‹¤.</p>

<p><br /></p>

<h1 id="test-double">Test Double</h1>

<p>ìœ„ì—ì„œ ë§í•œ ê²ƒì´ 100% í‹€ë¦¬ì§„ ì•Šì•˜ë‹¤.</p>

<p>í•˜ì§€ë§Œ, ê·¸ê²ƒì´ <code class="language-plaintext highlighter-rouge">Mock</code>ì¼ìˆ˜ë„ ì•„ë‹ ìˆ˜ë„ ìˆì—ˆë‹¤.</p>

<p><br /></p>

<p>ì´ ì—­í• ê³¼ êµ­ë‚´ì—ì„œ ì˜ ë§¤ì¹­ì´ ë˜ëŠ” ë‹¨ì–´ëŠ”<code class="language-plaintext highlighter-rouge">ìŠ¤í„´íŠ¸ë§¨</code>ì´ë‹¤.</p>

<p>ì‹¤ì œë¡œ ìœ„í—˜í•œ ì•¡ì…˜ì´ ìˆì„ ê²½ìš° ì´ <code class="language-plaintext highlighter-rouge">ìŠ¤í„´íŠ¸ë§¨</code>ì´ ëŒ€ì‹  í•´ì¤€ë‹¤.</p>

<p>ë§ˆì¹˜ ë‚´ê°€ ì´í•´í•œ <code class="language-plaintext highlighter-rouge">Mock</code>ê³¼ ì°°ë–¡ì´ë‹¤.</p>

<p><br /></p>

<p>ì´ ë‹¨ì–´ëŠ” í•´ì™¸ì—ì„œ <code class="language-plaintext highlighter-rouge">Sturnt Double</code>ì´ë¼ê³  í•œë‹¤.</p>

<p><br /></p>

<p>ê·¸ë¦¬ê³  ì´ ê¸€ì˜ ì£¼ì œëŠ” <code class="language-plaintext highlighter-rouge">Test Double</code>.</p>

<p>ì´ë•Œë¶€í„° ê°ì´ ì„œì„œíˆ ì™”ë‹¤.</p>

<p><br /></p>

<p>(ì•„ë§ˆ??)ìŠ¤í„´íŠ¸ ë§¨ë“¤ë„ ë‹¤ì–‘í•œ ë¶„ì•¼ê°€ ìˆì„ ê²ƒì´ë‹¤. ìë™ì°¨ ì•¡ì…˜ ì „ë¬¸, ì‹¸ì›€ ì „ë¬¸ ë“±ë“±</p>

<p><br /></p>

<p><code class="language-plaintext highlighter-rouge">Mock</code> ë˜í•œ ë§ˆì°¬ê°€ì§€ì˜€ë‹¤.</p>

<p>ê·¸ì € <code class="language-plaintext highlighter-rouge">Test Double</code>ì˜ ì¢…ë¥˜ ì¤‘ í•˜ë‚˜ì˜€ë˜ ê²ƒì´ë‹¤.</p>

<p><br /></p>

<p>ê·¸ ì™¸ì— ì¢…ë¥˜ë“¤ì€ ë‹¤ìŒê³¼ ê°™ë‹¤.</p>

<ul>
  <li>Dummy</li>
  <li>Fake</li>
  <li>Stub</li>
  <li>Mock</li>
  <li>Stub</li>
</ul>

<p><br /></p>

<h2 id="test-doubleì€-ì™œ-ì“°ëŠ”ê°€">Test Doubleì€ ì™œ ì“°ëŠ”ê°€?</h2>

<p>ë‹¤ìŒì— ëŒ€í•´ì„œ  OXë¥¼ ìƒê°í•´ë³´ì</p>

<ul>
  <li>
    <p>(ì „ì œ) <code class="language-plaintext highlighter-rouge">ViewModel</code>ì´ <code class="language-plaintext highlighter-rouge">Repository(Network)</code>ë¥¼ í”„ë¡œí¼í‹°ë¡œ ê°€ì§€ê³  ìˆë‹¤.</p>
  </li>
  <li>
    <p><code class="language-plaintext highlighter-rouge">ViewModel</code> í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ ì‘ì„±í• ë•Œ, ì‹¤ì œ í†µì‹ í•˜ëŠ” <code class="language-plaintext highlighter-rouge">Respository</code>ê°€ í•„ìš”í• ê¹Œ?</p>
  </li>
</ul>

<p><br /></p>

<p>ë‚´ ìƒê°ì€ ì•„ë‹ˆë‹¤,</p>

<p>ê·¸ ì´ìœ ëŠ” <code class="language-plaintext highlighter-rouge">Repository</code>ëŠ” <code class="language-plaintext highlighter-rouge">Repository Test</code>ë¥¼ ë³„ë„ë¡œ ì‘ì„±í•´ì„œ</p>

<p>ê±°ê¸°ì„œ í†µì‹ ì´ ì˜ë˜ëŠ”ì§€ ë¬¸ì œê°€ ì—†ëŠ”ì§€ í…ŒìŠ¤íŠ¸ë¥¼ ì‘ì„±í•˜ë©´ ë˜ê³ ,</p>

<p><code class="language-plaintext highlighter-rouge">ViewModel</code>ì—ì„  í•  í•„ìš”ê°€ ì—†ë‹¤ ìƒê°í•œë‹¤.</p>

<p><br /></p>

<p><code class="language-plaintext highlighter-rouge">ViewModel</code>ì„ í…ŒìŠ¤íŠ¸ í•˜ëŠ”ë°,</p>

<p>í˜„ì¬ í†µì‹ ì´ ì˜ë˜ëŠ”ì§€, ì™€ì´íŒŒì´ê°€ ì˜ ë˜ëŠ”ì§€, ì‹¤ì œ ì„œë²„ê°€ ì¥ì• ê°€ ìˆëŠ”ì§€ë¥¼ ê³ ë ¤í•  í•„ìš”ê°€ ì—†ê¸° ë•Œë¬¸ì´ë‹¤.</p>

<p>ê·¸ëŸ¬í•œ ìš”ì†ŒëŠ” ìœ„ì— ë§í•œ <code class="language-plaintext highlighter-rouge">Repsotiroy Test</code>ì—ì„œ ê±¸ëŸ¬ì§ˆê²ƒì´ë‹¤.</p>

<p><br /></p>

<p>ì¦‰, í˜„ì¬ í…ŒìŠ¤íŠ¸ ëŒ€ìƒì— ëŒ€í•´ì„œë§Œ ì§‘ì¤‘í•˜ê³  ì‹¶ì€ ê²ƒì´ë‹¤.</p>

<p><br /></p>

<p>ìœ„ì˜ ì˜ˆì‹œì²˜ëŸ¼ ì‹¤ì œ ê°ì²´ë¥¼ ëŒ€ì‹ í•´ì„œ ê°€ì§œ ê°ì²´ ì—­í• ì„ í•˜ì§€ë§Œ,</p>

<p>ê·¸ê²ƒë“¤ì´ í•˜ëŠ” ê²ƒì€ ì¡°ê¸ˆì”© ë‹¤ë¥´ë‹¤.</p>

<p><br /></p>

<p>í•˜ì§€ë§Œ,</p>

<p>ê°œë°œìë¼ë¦¬ ì‹¤ì œ ì •í™•í•œ ì˜ì‚¬ì†Œí†µì´ ë˜ê¸° ìœ„í•´ì„œ ê·¸ ì—­í• ë³„ë¡œ ëª…ì¹­ì„ ìª¼ê°œì—ˆê³ ,</p>

<p>ê·¸ëŸ¬ë‹¤ ë³´ë‹ˆ ìœ„ì— ë§í•œ 5ê°€ì§€ë¡œ êµ¬ë¶„ì´ ëœê²Œ ì•„ë‹ê¹Œ ì‹¶ë‹¤.</p>

<p><br /></p>

<h2 id="dummy">Dummy</h2>

<p><strong>ì•„ë¬´ê²ƒë„ í•˜ì§€ ì•Šê³ , ë‹¨ìˆœíˆ ìë¦¬ë§Œ ì±„ì›Œì¤„ë¿ì¸ ê·¸ëŸ° ì—­í• .</strong></p>

<p><br /></p>

<p>ì˜ˆë¥¼ ë“¤ì,</p>

<p><code class="language-plaintext highlighter-rouge">X</code>ë¼ëŠ” ê°ì²´ë¥¼ ì´ˆê¸°í™” í• ë•Œ <code class="language-plaintext highlighter-rouge">A</code>ë¼ëŠ” ê°ì²´ê°€ í•„ìš”í•˜ë‹¤. ê·¼ë° <code class="language-plaintext highlighter-rouge">A</code>ëŠ” <code class="language-plaintext highlighter-rouge">B</code>, <code class="language-plaintext highlighter-rouge">C</code>ë¼ëŠ” ê°ì²´ê°€ í•„ìš”í•˜ë‹¤.</p>

<p>ë˜ ë‹¤ë¥¸ <code class="language-plaintext highlighter-rouge">Y</code>ë¼ëŠ” ê°ì²´ëŠ” í…ŒìŠ¤íŒ… í•˜ê¸° ìœ„í•´ì„œ <code class="language-plaintext highlighter-rouge">B</code>, <code class="language-plaintext highlighter-rouge">C</code> ê¸°ëŠ¥ì´ ëª¨ë‘ êµ¬í˜„ì´ í•„ìš”í•˜ë‹¤.</p>

<p>ê·¼ë°, <code class="language-plaintext highlighter-rouge">X</code>ëŠ” ì‹¤ì œ <code class="language-plaintext highlighter-rouge">C</code>ì˜ ê¸°ëŠ¥ì— ì˜í–¥ì„ ë°›ì§€ ì•ŠëŠ”ë‹¤.</p>

<p>ê·¸ë ‡ë‹¤ë©´, <code class="language-plaintext highlighter-rouge">X</code>ë¼ëŠ” ê²ƒì„ í…ŒìŠ¤íŠ¸ í• ë•Œ,</p>

<p><code class="language-plaintext highlighter-rouge">A</code>ë¥¼ êµ¬í˜„í•˜ê¸° ìœ„í•´ <code class="language-plaintext highlighter-rouge">B</code>ëŠ” í•„ìš”í•˜ì§€ë§Œ <code class="language-plaintext highlighter-rouge">C</code>ë¼ëŠ” ê²ƒì˜ ì‹¤ì œ ê°ì²´ê°€ í•„ìš”í• ê¹Œ?</p>

<p><br /></p>

<p><code class="language-plaintext highlighter-rouge">C</code>ì²˜ëŸ¼, íŒŒë¼ë¯¸í„°ë¡œì¨ ì–´ì©” ìˆ˜ ì—†ì´ ì±„ì›Œì•¼í•˜ì§€ë§Œ ì‹¤ì œë¡  ì•„ë¬´ ì—­í• ì„ í•˜ì§€ ì•ŠëŠ” ê²ƒì— <code class="language-plaintext highlighter-rouge">Dummy</code>ë¥¼ ì“´ë‹¤</p>

<p><br /></p>

<h2 id="fake">Fake</h2>

<p><strong>ì‹¤ì œ ê°ì²´ì™€ í•µì‹¬ ë¡œì§ì€ ë™ì¼í•˜ê²Œ ì‘ì„± ë˜ì–´ìˆë‹¤. í•˜ì§€ë§Œ, ë‹¤ë¥¸ ë¶ˆí•„ìš” ìš”ì†ŒëŠ” ì œê±° ë˜ì–´ìˆë‹¤.</strong></p>

<p><br /></p>

<p>ì˜ˆë¥¼ ë“¤ì,</p>

<p>ê³„ì‚°ê¸° ë©”ì†Œë“œ ì¤‘ <code class="language-plaintext highlighter-rouge">sum</code>ì´ë¼ëŠ”ê²Œ ìˆë‹¤.</p>

<p>ì´ <code class="language-plaintext highlighter-rouge">sum</code>ì€ í˜¸ì¶œ ë˜ì—ˆì„ë•Œ <code class="language-plaintext highlighter-rouge">(a+b)</code> ê°’ì„ ë¦¬í„´í•˜ëŠ”ê²Œ ëª©ì ì´ë‹¤.</p>

<p>ê·¼ë°, ì‹¤ì œ ì½”ë“œì—ì„  <code class="language-plaintext highlighter-rouge">sum</code>ì— ëŒ€í•œ ë¡œê·¸ë¥¼ ì„œë²„ì— ë‚¨ê¸°ê¸° ìœ„í•´ í†µì‹ ì„ í•˜ëŠ” ì½”ë“œê°€ ë“¤ì–´ ê°”ë‹¤ê±°ë‚˜,</p>

<p>ë‹¤ë¥¸ ê°ì²´ì— ì „ë‹¬ì„ í•˜ëŠ” ì—­í• ì„ í•˜ëŠ” ì½”ë“œë„ ë“¤ì–´ ê°”ì„ ìˆ˜ë„ ìˆë‹¤.</p>

<p><br /></p>

<p>í•˜ì§€ë§Œ, ì´ê²ƒì€ í˜„ì¬ ë¶ˆí•„ìš”í•˜ë‹¤.</p>

<p><br /></p>

<p>ì½”ë“œë¡œì¨ ë‹¤ì‹œ í‘œí˜„í•´ë³´ì.</p>

<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">protocol</span> <span class="kt">Calculator</span> <span class="p">{</span>
    <span class="kd">func</span> <span class="nf">sum</span><span class="p">(</span><span class="nv">x</span><span class="p">:</span> <span class="kt">Int</span><span class="p">,</span> <span class="nv">y</span><span class="p">:</span> <span class="kt">Int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">Int</span>
<span class="p">}</span>
</code></pre></div></div>

<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="kt">CalculatorImp</span><span class="p">:</span> <span class="kt">Calculator</span> <span class="p">{</span>
    <span class="k">let</span> <span class="nv">b</span><span class="p">:</span> <span class="kt">Some</span>
    <span class="k">let</span> <span class="nv">c</span><span class="p">:</span> <span class="kt">Some2</span>

    <span class="nf">init</span><span class="p">(</span><span class="nv">b</span><span class="p">:</span> <span class="kt">Some</span><span class="p">,</span> <span class="nv">c</span><span class="p">:</span> <span class="kt">Some2</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">self</span><span class="o">.</span><span class="n">b</span> <span class="o">=</span> <span class="n">b</span>
        <span class="k">self</span><span class="o">.</span><span class="n">c</span> <span class="o">=</span> <span class="n">c</span>
    <span class="p">}</span>

    <span class="kd">func</span> <span class="nf">sum</span><span class="p">(</span><span class="nv">x</span><span class="p">:</span> <span class="kt">Int</span><span class="p">,</span> <span class="nv">y</span><span class="p">:</span> <span class="kt">Int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">Int</span> <span class="p">{</span>
        <span class="c1">// ë¶ˆí•„ìš”</span>
        <span class="n">b</span><span class="o">.</span><span class="nf">callMethod</span><span class="p">()</span>
        <span class="n">b</span><span class="o">.</span><span class="nf">callMethod2</span><span class="p">()</span>
        <span class="n">b</span><span class="o">.</span><span class="nf">callMethod3</span><span class="p">()</span>
    
        <span class="c1">// ë¶ˆí•„ìš”</span>
        <span class="k">if</span> <span class="n">x</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="p">{</span>
            <span class="n">c</span><span class="o">.</span><span class="nf">callLogMethod</span><span class="p">()</span>
        <span class="p">}</span>
        
        <span class="c1">// í•µì‹¬ ì½”ë“œ</span>
        <span class="k">let</span> <span class="nv">result</span> <span class="o">=</span> <span class="n">x</span> <span class="o">+</span> <span class="n">y</span>
        <span class="k">return</span> <span class="n">result</span>
    <span class="p">}</span>
<span class="p">}</span>

</code></pre></div></div>

<p><br /></p>

<p>ì£¼ì„ê³¼ ê°™ì´ í•µì‹¬ ì½”ë“œë¥¼ ì œì™¸í•œ ë‚˜ë¨¸ì§€ëŠ” ë¶ˆí•„ìš”í•˜ë‹¤.</p>

<p>ê·¸ë ‡ë‹´, ì´ë ‡ê²Œ ê°„ì†Œí™”ê°€ ê°€ëŠ¥í•˜ë‹¤.</p>

<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="kt">CalculatorFake</span><span class="p">:</span> <span class="kt">Calculator</span> <span class="p">{</span>
    <span class="kd">func</span> <span class="nf">sum</span><span class="p">(</span><span class="nv">x</span><span class="p">:</span> <span class="kt">Int</span><span class="p">,</span> <span class="nv">y</span><span class="p">:</span> <span class="kt">Int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">Int</span> <span class="p">{</span>
        <span class="k">let</span> <span class="nv">result</span> <span class="o">=</span> <span class="n">x</span> <span class="o">+</span> <span class="n">y</span>
        <span class="k">return</span> <span class="k">return</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p><br /></p>

<p>ì´ê²Œ <code class="language-plaintext highlighter-rouge">Fake</code>ë‹¤.</p>

<p><br /></p>

<h2 id="mock-spy-stub-ì„¤ëª…ì˜-ì „ì œ">Mock, SPY, Stub ì„¤ëª…ì˜ ì „ì œ</h2>

<p><code class="language-plaintext highlighter-rouge">Mock</code>, <code class="language-plaintext highlighter-rouge">SPY</code>, <code class="language-plaintext highlighter-rouge">Stub</code>ì— ë“¤ì–´ê°€ê¸°ì „ì—</p>

<p>ë‹¤ìŒê³¼ ê°™ì€ ì „ì œë¥¼ ê³µí†µìœ¼ë¡œ ì‚¬ìš©í•˜ë¯€ë¡œ ë¨¼ì € ë³´ì</p>

<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// 1. í”„ë¦°í„° í”„ë¡œí† ì½œ</span>
<span class="kd">protocol</span> <span class="kt">Printer</span> <span class="p">{</span>
    <span class="kd">func</span> <span class="nf">network</span><span class="p">(</span><span class="nv">handler</span><span class="p">:</span> <span class="kd">@escaping</span> <span class="p">(</span><span class="kt">String</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">Void</span><span class="p">)</span>
<span class="p">}</span>

<span class="c1">// 2. í”„ë¦°í„° êµ¬í˜„ì²´</span>
<span class="kd">class</span> <span class="kt">PrinterImp</span><span class="p">:</span> <span class="kt">Printer</span> <span class="p">{</span>
    
    <span class="c1">// 2-1. í†µì‹ (ì˜ˆì‹œë¥¼ ìœ„í•´ ì„ì˜ë¡œ ì‘ì„±í–ˆìŠµë‹ˆë‹¤.)</span>
    <span class="kd">func</span> <span class="nf">network</span><span class="p">(</span><span class="nv">handler</span><span class="p">:</span> <span class="kd">@escaping</span> <span class="p">(</span><span class="kt">String</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">Void</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">let</span> <span class="nv">url</span> <span class="o">=</span> <span class="kt">URL</span><span class="p">(</span><span class="nv">string</span><span class="p">:</span> <span class="s">"naver.com"</span><span class="p">)</span><span class="o">!</span>
        <span class="k">let</span> <span class="nv">session</span> <span class="o">=</span> <span class="kt">URLSession</span><span class="o">.</span><span class="n">shared</span>
        
        <span class="k">let</span> <span class="nv">task</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="nf">dataTask</span><span class="p">(</span><span class="nv">with</span><span class="p">:</span> <span class="n">url</span><span class="p">)</span> <span class="p">{</span> <span class="n">data</span><span class="p">,</span> <span class="n">response</span><span class="p">,</span> <span class="n">error</span> <span class="k">in</span>
            <span class="c1">// ì–´ë–¤ ì•¡ì…˜ë“¤ ë¸”ë¼ ë¸”ë¼...</span>
            <span class="k">guard</span>
                <span class="k">let</span> <span class="nv">data</span> <span class="o">=</span> <span class="n">data</span><span class="p">,</span>
                <span class="k">let</span> <span class="nv">result</span> <span class="o">=</span> <span class="kt">String</span><span class="p">(</span><span class="nv">data</span><span class="p">:</span> <span class="n">data</span><span class="p">,</span> <span class="nv">encoding</span><span class="p">:</span> <span class="o">.</span><span class="n">utf8</span><span class="p">)</span>
            <span class="k">else</span> <span class="p">{</span>
                <span class="k">return</span>
            <span class="p">}</span>
            <span class="c1">// handler ì‚¬ìš©</span>
            <span class="nf">handler</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
        <span class="p">}</span>
        
        <span class="n">task</span><span class="o">.</span><span class="nf">resume</span><span class="p">()</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="c1">// 3. íšŒì‚¬ Class, Printer, PrintedTextë¥¼ í”„ë¡œí¼í‹°ë¡œ ê°–ê³  ìˆë‹¤.</span>
<span class="kd">class</span> <span class="kt">Company</span> <span class="p">{</span>
    <span class="k">var</span> <span class="nv">printer</span><span class="p">:</span> <span class="kt">Printer</span>
    <span class="k">var</span> <span class="nv">printedText</span><span class="p">:</span> <span class="kt">String</span><span class="p">?</span>
    
    <span class="nf">init</span><span class="p">(</span><span class="nv">printer</span><span class="p">:</span> <span class="kt">Printer</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">self</span><span class="o">.</span><span class="n">printer</span> <span class="o">=</span> <span class="n">printer</span>
    <span class="p">}</span>
    
    <span class="c1">// 3-1. í•´ë‹¹ ë©”ì†Œë“œ ì‹¤í–‰ì‹œ  </span>
    <span class="kd">func</span> <span class="nf">submit</span><span class="p">(</span><span class="nv">complete</span><span class="p">:</span> <span class="kd">@escaping</span> <span class="p">()</span><span class="o">-&gt;</span><span class="kt">Void</span><span class="p">)</span> <span class="p">{</span>
    
        <span class="c1">// 3-2. `Printer`ì˜ `network` í†µí•´ í†µì‹  í›„</span>
        <span class="n">printer</span><span class="o">.</span><span class="nf">network</span><span class="p">(</span><span class="nv">handler</span><span class="p">:</span> <span class="p">{</span> <span class="n">value</span> <span class="k">in</span>
            <span class="c1">// 3-3. ì¶œë ¥ëœ ê²°ê³¼ë¥¼ í”„ë¡œí¼í‹°ë¡œ ê°–ê³  ìˆìœ¼ë©°,</span>
            <span class="k">self</span><span class="o">.</span><span class="n">printedText</span> <span class="o">=</span> <span class="n">value</span>
            <span class="c1">// 3-4. í´ë¡œì ¸ë¥¼ ì‹¤í–‰í•œë‹¤.</span>
            <span class="nf">complete</span><span class="p">()</span>
        <span class="p">})</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p><br /></p>

<p>ê°„ë‹¨í•˜ë‹¤. <code class="language-plaintext highlighter-rouge">Company</code>ëŠ” <code class="language-plaintext highlighter-rouge">Printer</code>ë¥¼ í”„ë¡œí¼í‹°ë¡œ ê°–ê³  ìˆë‹¤.</p>

<p><code class="language-plaintext highlighter-rouge">Company</code>ì˜ <code class="language-plaintext highlighter-rouge">submit()</code>ì‹œ <code class="language-plaintext highlighter-rouge">Printer</code>ì˜ <code class="language-plaintext highlighter-rouge">network()</code>ë¥¼ ë™ì‘í•˜ê²Œ í•œë‹¤.</p>

<p><br /></p>

<p>ì´í›„ì˜ ë‚´ìš©ì€ <code class="language-plaintext highlighter-rouge">Company</code>ë¥¼ í…ŒìŠ¤íŠ¸í•œë‹¤ëŠ” ì „ì œí•˜ì— ì‘ì„±ë˜ì—ˆë‹¤.</p>

<p><br /></p>

<h3 id="stub">Stub</h3>

<p><strong>ê°€ì§œ ê°ì²´ì§€ë§Œ ë¯¸ë¦¬ ì§€ì •í•œ ê°€ì§œ ê²°ê³¼ ê°’ì„ ë˜ëŒë ¤ì¤Œìœ¼ë¡œì¨ ë‚˜ë¨¸ì§€ ë™ì‘ì„ ì§„í–‰ í•  ìˆ˜ ìˆë„ë¡ í•´ì¤€ë‹¤.</strong></p>

<p><br /></p>

<p>ê¸€ ì´ˆì…ì— ì˜ˆì‹œ ë¶€ë¶„ì— í•´ë‹¹ ëœë‹¤. <code class="language-plaintext highlighter-rouge">í†µì‹ </code>ë¥¼ ì´ìš©í•˜ëŠ” ë¶€ë¶„ì´ <code class="language-plaintext highlighter-rouge">Company</code> í…ŒìŠ¤íŠ¸ì— ì˜í–¥ì„ ì¤„ í•„ìš”ëŠ” ì—†ë‹¤.</p>

<p>ë‹¨ì§€ í†µì‹  ì½”ë“œì²˜ëŸ¼ ì–´ë– í•œ ê°’ì„ ì½œë°±ìœ¼ë¡œ ëŒë ¤ì£¼ë©´ ëœë‹¤.</p>

<p><br /></p>

<p>ê·¸ê²ƒì„ ì½”ë“œë¡œ êµ¬í˜„í•˜ë©´ <code class="language-plaintext highlighter-rouge">Print Stub</code>ì€ ë‹¤ìŒê³¼ ê°™ë‹¤.</p>

<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="kt">PrinterStub</span><span class="p">:</span> <span class="kt">Printer</span> <span class="p">{</span>
    
    <span class="c1">// 1. ë¯¸ë¦¬ ëŒë ¤ì¤„ ê°’ì„ ì •í•´ë‘”ë‹¤.</span>
    <span class="k">var</span> <span class="nv">handlerValue</span> <span class="o">=</span> <span class="s">"ì•ˆë…• Stub?"</span>
    
    <span class="kd">func</span> <span class="nf">network</span><span class="p">(</span><span class="nv">handler</span><span class="p">:</span> <span class="kd">@escaping</span> <span class="p">(</span><span class="kt">String</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">Void</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// 2. ì‹¤ì œ í†µì‹ ì²˜ëŸ¼ ë¹„ë™ê¸°ë¡œ í´ë¡œì €ë¥¼ ì‹¤í–‰í•˜ë„ë¡ í•œë‹¤.</span>
        <span class="kt">DispatchQueue</span><span class="o">.</span><span class="nf">global</span><span class="p">()</span><span class="o">.</span><span class="nf">asyncAfter</span><span class="p">(</span><span class="nv">deadline</span><span class="p">:</span> <span class="o">.</span><span class="nf">now</span><span class="p">()</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
            <span class="c1">// 3. ë¯¸ë¦¬ ë§Œë“¤ì–´ë‘” ê°’ì„ ëŒë ¤ì¤€ë‹¤.</span>
            <span class="nf">handler</span><span class="p">(</span><span class="k">self</span><span class="o">.</span><span class="n">handlerValue</span><span class="p">)</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">Printer</code> í”„ë¡œí† ì½œì„ ë°›ê³  ìˆê¸° ë•Œë¬¸ì—, êµ¬í˜„ì„ í•´ì¤˜ì•¼í•œë‹¤.</p>

<p><br /></p>

<p>ê·¸ë ‡ì§€ë§Œ ì£¼ì„ì²˜ëŸ¼ ì‹¤ì œ í†µì‹ ì´ ì•„ë‹Œ <code class="language-plaintext highlighter-rouge">GCD</code>ë¥¼ ì´ìš©í•˜ì—¬,</p>

<p>ì—°ê¸°ë¥¼ í•´ì¤€ë’¤ 1ì´ˆ ë’¤ì— ê°’ì„ ëŒë ¤ì¤€ë‹¤.</p>

<p><br /></p>

<p>ì´ê²ƒì„ í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ ì‘ì„±í•˜ë©´ ë‹¤ìŒê³¼ ê°™ë‹¤.</p>

<p><br /></p>

<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="kt">StubTests</span><span class="p">:</span> <span class="kt">XCTestCase</span> <span class="p">{</span>

    <span class="kd">private</span> <span class="k">var</span> <span class="nv">sut</span><span class="p">:</span> <span class="kt">TestDouble</span><span class="o">.</span><span class="kt">Company</span><span class="o">!</span>
    <span class="kd">private</span> <span class="k">var</span> <span class="nv">printerStub</span><span class="p">:</span> <span class="kt">TestDouble</span><span class="o">.</span><span class="kt">PrinterStub</span><span class="o">!</span>
    
    <span class="k">override</span> <span class="kd">func</span> <span class="nf">setUp</span><span class="p">()</span> <span class="p">{</span>
        <span class="c1">// 1. PrintImp ëŒ€ì‹  Stubì„ ì´ìš©í•œë‹¤</span>
        <span class="n">printerStub</span> <span class="o">=</span> <span class="kt">TestDouble</span><span class="o">.</span><span class="kt">PrinterStub</span><span class="p">()</span>
        <span class="n">sut</span> <span class="o">=</span> <span class="kt">TestDouble</span><span class="o">.</span><span class="kt">Company</span><span class="p">(</span><span class="nv">printer</span><span class="p">:</span> <span class="n">printerStub</span><span class="p">)</span>
    <span class="p">}</span>
    
    <span class="kd">func</span> <span class="nf">test_submit</span><span class="p">()</span> <span class="p">{</span>
        <span class="c1">// given</span>
        <span class="k">let</span> <span class="nv">exp</span> <span class="o">=</span> <span class="nf">expectation</span><span class="p">(</span><span class="nv">description</span><span class="p">:</span> <span class="s">"exp"</span><span class="p">)</span>
        
        <span class="c1">// when</span>
        <span class="n">sut</span><span class="o">.</span><span class="nf">submit</span><span class="p">(</span><span class="nv">complete</span><span class="p">:</span> <span class="p">{</span>
            <span class="n">exp</span><span class="o">.</span><span class="nf">fulfill</span><span class="p">()</span>
        <span class="p">})</span>
        
        <span class="nf">wait</span><span class="p">(</span><span class="nv">for</span><span class="p">:</span> <span class="p">[</span><span class="n">exp</span><span class="p">],</span> <span class="nv">timeout</span><span class="p">:</span> <span class="mi">2</span><span class="p">)</span>
        
        <span class="c1">// then</span>
        <span class="kt">XCTAssertEqual</span><span class="p">(</span><span class="n">sut</span><span class="o">.</span><span class="n">printedText</span><span class="p">,</span> <span class="s">"ì•ˆë…• Stub?"</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p><br /></p>

<p>í…ŒìŠ¤íŠ¸ í•˜ê³ ì í•œê²ƒì€ <code class="language-plaintext highlighter-rouge">submit()</code>ì„ í–ˆì„ ë•Œ,</p>

<p>í†µì‹  í›„ <code class="language-plaintext highlighter-rouge">String</code>ì„ <code class="language-plaintext highlighter-rouge">printedText</code>(í”„ë¡œí¼í‹°)ë¡œ ì˜ ê°€ì§€ê³  ìˆëŠ”ì§€ë¥¼ ë³´ê³  ì‹¶ì—ˆë‹¤.</p>

<p><br /></p>

<p>ì—¬ê¸°ì„œ ì‹¤ì œë¡œ í†µì‹ ì€ ë  í•„ìš” ì—†ê¸°ì— <code class="language-plaintext highlighter-rouge">Stub</code>ì„ ì´ìš©í•˜ì˜€ê³ ,</p>

<p>ê±°ê¸°ì„œ ë¯¸ë¦¬ ì •í•´ë‘” ê°’<code class="language-plaintext highlighter-rouge">"ì•ˆë…• Stub?"</code>ì´ ì˜ ë“¤ì–´ ì™”ëŠ”ì§€ë¥¼ í™•ì¸í•˜ëŠ” ì½”ë“œë¥¼ ì‘ì„±í–ˆë‹¤.</p>

<p><br /></p>

<p>ë” ì´ìƒ ì‹¤ì œ í†µì‹ ì´ ì˜ ë˜ëŠ”ì§€, ì„œë²„ê°€ ë©€ì©¡í•œì§€ ì˜í–¥ì„ ë°›ì§€ ì•ŠëŠ”ë‹¤.</p>

<p><br /></p>

<h2 id="mock">Mock</h2>

<p><strong>ë¦¬í„´ê°’, ì½œë°±ì€ ì¤‘ìš”í•˜ì§€ ì•Šë‹¤. í•´ë‹¹ ë©”ì†Œë“œê°€ ì˜, ì–¼ë§ˆë‚˜ ì‹¤í–‰ ë˜ì—ˆëŠ”ì§€ê°€ ì¤‘ìš”í•˜ë‹¤.</strong></p>

<p><br /></p>

<p>ë§Œì•½ì˜ í…ŒìŠ¤íŠ¸ ìš”ì†Œê°€ ê²°ê³¼ê°’ í…ŒìŠ¤íŠ¸ê°€ ì•„ë‹Œ</p>

<p>Companyì˜ <code class="language-plaintext highlighter-rouge">submit</code>ì„ í†µí•´</p>

<p>Printerì˜ <code class="language-plaintext highlighter-rouge">network</code>ê°€ ì˜ í˜¸ì¶œ ë˜ì—ˆëŠ”ì§€ê°€ ì¤‘ìš”í•˜ë‹¤ë©´ ë‹¤ìŒê³¼ ê°™ì´ <code class="language-plaintext highlighter-rouge">Mock</code>ì„ ìƒì„±í•œë‹¤.</p>

<p><br /></p>

<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="kt">PrinterMock</span><span class="p">:</span> <span class="kt">Printer</span> <span class="p">{</span>
    
    <span class="k">var</span> <span class="nv">networkCallCount</span> <span class="o">=</span> <span class="mi">0</span>
    
    <span class="kd">func</span> <span class="nf">network</span><span class="p">(</span><span class="nv">handler</span><span class="p">:</span> <span class="kd">@escaping</span> <span class="p">(</span><span class="kt">Void</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">Void</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">var</span> <span class="nv">networkCallCount</span> <span class="o">+=</span> <span class="mi">1</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">networkCallCount</code>ë¼ëŠ” ë³€ìˆ˜ë¥¼ ë§Œë“¤ê³  <code class="language-plaintext highlighter-rouge">network</code>ë©”ì†Œë“œê°€ ì‹¤í–‰ ë˜ë©´ <code class="language-plaintext highlighter-rouge">+1</code>ì„ í•´ì£¼ëŠ” ê²Œ ëì´ë‹¤.</p>

<p><br /></p>

<p>ì´ì œ í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ ë³´ì.</p>

<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="kt">MockTests</span><span class="p">:</span> <span class="kt">XCTestCase</span> <span class="p">{</span>
    <span class="kd">private</span> <span class="k">var</span> <span class="nv">sut</span><span class="p">:</span> <span class="kt">Company</span><span class="o">!</span>
    <span class="kd">private</span> <span class="k">var</span> <span class="nv">printerMock</span><span class="p">:</span> <span class="kt">PrinterMock</span><span class="o">!</span>
    
    <span class="k">override</span> <span class="kd">func</span> <span class="nf">setUp</span><span class="p">()</span> <span class="p">{</span>
        <span class="n">printerMock</span> <span class="o">=</span> <span class="kt">PrinterMock</span><span class="p">()</span>
        <span class="c1">// 1. PrintImp ëŒ€ì‹  Mockì„ ë„£ì–´ì¤€ë‹¤.</span>
        <span class="n">sut</span> <span class="o">=</span> <span class="kt">Company</span><span class="p">(</span><span class="nv">printer</span><span class="p">:</span> <span class="n">printerMock</span><span class="p">)</span>
    <span class="p">}</span>
    
    <span class="kd">func</span> <span class="nf">test_call_network</span><span class="p">()</span> <span class="p">{</span>
        <span class="c1">// given</span>
        <span class="c1">// when</span>
        <span class="n">sut</span><span class="o">.</span><span class="nf">submit</span><span class="p">()</span>
        
        <span class="c1">// then</span>
        <span class="c1">// 2. printerMockì— ë©”ì†Œë“œê°€ ì˜ í˜¸ì¶œë˜ì—ˆëŠ”ì§€ í…ŒìŠ¤íŠ¸ í•œë‹¤.</span>
        <span class="kt">XCTAssertEqual</span><span class="p">(</span><span class="n">printerMock</span><span class="o">.</span><span class="n">networkCallCount</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p><br /></p>

<p>ê°„ë‹¨í•˜ë‹¤! <code class="language-plaintext highlighter-rouge">submit</code>ì€ í•œë²ˆ í˜¸ì¶œí–ˆìœ¼ë‹ˆ <code class="language-plaintext highlighter-rouge">callCount</code>ëŠ” <code class="language-plaintext highlighter-rouge">1</code>ì´ì—¬ì•¼í•œë‹¤.</p>

<p><code class="language-plaintext highlighter-rouge">2</code>ë¼ë©´ ë­”ê°€ ë§ì´ ì˜ëª»ëœ ê²ƒì´ë‹¤.</p>

<p><br /></p>

<h2 id="spy">SPY</h2>

<p><strong><code class="language-plaintext highlighter-rouge">Mock</code> + <code class="language-plaintext highlighter-rouge">Stub</code>ì´ë‹¤. ìƒíƒœë„ í™•ì¸í•˜ê³  í–‰ìœ„ë„ í…ŒìŠ¤íŠ¸í•œë‹¤.</strong></p>

<p>ì´ê²Œ ë‚´ê°€ ì˜ëª» ì´í•´í–ˆë˜ <code class="language-plaintext highlighter-rouge">Mock</code>ì´ë‹¤â€¦</p>

<p><br /></p>

<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="kt">PrinterSPY</span><span class="p">:</span> <span class="kt">Printer</span> <span class="p">{</span>
    
    <span class="k">var</span> <span class="nv">handlerValue</span> <span class="o">=</span> <span class="s">"ì•ˆë…• SPY?"</span>
    
    <span class="k">var</span> <span class="nv">networkCallCount</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="kd">func</span> <span class="nf">network</span><span class="p">(</span><span class="nv">handler</span><span class="p">:</span> <span class="kd">@escaping</span> <span class="p">(</span><span class="kt">String</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">Void</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">networkCallCount</span> <span class="o">+=</span> <span class="mi">1</span>

        <span class="kt">DispatchQueue</span><span class="o">.</span><span class="nf">global</span><span class="p">()</span><span class="o">.</span><span class="nf">asyncAfter</span><span class="p">(</span><span class="nv">deadline</span><span class="p">:</span> <span class="o">.</span><span class="nf">now</span><span class="p">()</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
            <span class="nf">handler</span><span class="p">(</span><span class="k">self</span><span class="o">.</span><span class="n">handlerValue</span><span class="p">)</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p><br /></p>

<p>ì£¼ì„ë„ í•„ìš” ì—†ì„ ë“¯í•˜ë‹¤. ê°„ë‹¨í•˜ë‹¤.</p>

<p><code class="language-plaintext highlighter-rouge">Stub</code>ì²˜ëŸ¼ ë¯¸ë¦¬ ëŒë ¤ì¤„ ê°’ <code class="language-plaintext highlighter-rouge">handlerValue</code>ë„ ë§Œë“¤ì–´ ì¤¬ê³ </p>

<p>ë©”ì†Œë“œê°€ í˜¸ì¶œ ë˜ì—ˆëŠ”ì§€ í™•ì¸í•  <code class="language-plaintext highlighter-rouge">networkCallCount</code>ë„ ë„£ì—ˆë‹¤.</p>

<p><br /></p>

<p>í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ ë³´ì</p>

<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="kt">SPYTests</span><span class="p">:</span> <span class="kt">XCTestCase</span> <span class="p">{</span>

    <span class="kd">private</span> <span class="k">var</span> <span class="nv">sut</span><span class="p">:</span> <span class="kt">TestDouble</span><span class="o">.</span><span class="kt">Company</span><span class="o">!</span>
    <span class="kd">private</span> <span class="k">var</span> <span class="nv">printerSPY</span><span class="p">:</span> <span class="kt">TestDouble</span><span class="o">.</span><span class="kt">PrinterSPY</span><span class="o">!</span>
    
    <span class="k">override</span> <span class="kd">func</span> <span class="nf">setUp</span><span class="p">()</span> <span class="p">{</span>
        <span class="n">printerSPY</span> <span class="o">=</span> <span class="kt">TestDouble</span><span class="o">.</span><span class="kt">PrinterSPY</span><span class="p">()</span>
        <span class="n">sut</span> <span class="o">=</span> <span class="kt">TestDouble</span><span class="o">.</span><span class="kt">Company</span><span class="p">(</span><span class="nv">printer</span><span class="p">:</span> <span class="n">printerSPY</span><span class="p">)</span>
    <span class="p">}</span>
    <span class="kd">func</span> <span class="nf">test_call_network</span><span class="p">()</span> <span class="p">{</span>
        <span class="c1">// given</span>
        <span class="k">let</span> <span class="nv">exp</span> <span class="o">=</span> <span class="nf">expectation</span><span class="p">(</span><span class="nv">description</span><span class="p">:</span> <span class="s">"exp"</span><span class="p">)</span>
        
        <span class="c1">// when</span>
        <span class="n">sut</span><span class="o">.</span><span class="nf">submit</span><span class="p">(</span><span class="nv">complete</span><span class="p">:</span> <span class="p">{</span>
            <span class="n">exp</span><span class="o">.</span><span class="nf">fulfill</span><span class="p">()</span>
        <span class="p">})</span>
        
        <span class="nf">wait</span><span class="p">(</span><span class="nv">for</span><span class="p">:</span> <span class="p">[</span><span class="n">exp</span><span class="p">],</span> <span class="nv">timeout</span><span class="p">:</span> <span class="mi">2</span><span class="p">)</span>
        
        <span class="c1">// then</span>
        <span class="kt">XCTAssertEqual</span><span class="p">(</span><span class="n">sut</span><span class="o">.</span><span class="n">printedText</span><span class="p">,</span> <span class="s">"ì•ˆë…• SPY?"</span><span class="p">)</span>
        <span class="kt">XCTAssertEqual</span><span class="p">(</span><span class="n">printerSPY</span><span class="o">.</span><span class="n">networkCallCount</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>ë§ˆì§€ë§‰ <code class="language-plaintext highlighter-rouge">then</code>ì„ ë³´ì.</p>

<p>ë‘ê°€ì§€ë¥¼ í™•ì¸í•œë‹¤.</p>

<ol>
  <li><code class="language-plaintext highlighter-rouge">printedText</code> ìƒíƒœ ì²´í¬</li>
  <li><code class="language-plaintext highlighter-rouge">networkCallCount</code> í–‰ìœ„ ì²´í¬</li>
</ol>

<p><br /></p>

<h2 id="ìƒíƒœ-ê²€ì¦ê³¼-í–‰ìœ„-ê²€ì¦">ìƒíƒœ ê²€ì¦ê³¼ í–‰ìœ„ ê²€ì¦</h2>

<p>ì´ì   ëˆ„êµ°ê°€ <code class="language-plaintext highlighter-rouge">Mock</code>ê³¼ <code class="language-plaintext highlighter-rouge">Stub</code>ì˜ ì°¨ì´ëŠ” ë­ì—ìš”? ë¼ê³  í•˜ë©´</p>

<p>ì´ë ‡ê²Œ ëŒ€ë‹µí•  ìˆ˜ ìˆì„ ê²ƒ ê°™ë‹¤.</p>

<p><br /></p>

<blockquote>
  <p><code class="language-plaintext highlighter-rouge">Mock</code>ì€ í–‰ìœ„ ê²€ì¦ì´ê³ , <code class="language-plaintext highlighter-rouge">Stub</code>ì€ ìƒíƒœ ê²€ì¦ì´ì—ìš”</p>
</blockquote>

<p><br /></p>

<p>í•˜ì§€ë§Œ, ë¶€ì—° ì„¤ëª…ì„ ë” í•˜ê² ì§€. ì €ë ‡ê²Œ ë§í•˜ë©´ ì˜ì•„í•´ í•  í™•ë¥ ì´ ìˆë‹¤.</p>

<p>ë‚˜ë„ ê·¸ë¬ìœ¼ë‹ˆ.. ë‚˜ ê°™ì€ ì‚¬ëŒì€ ìˆì„ ê²ƒì´ë‹¤â€¦</p>

<p><br /></p>

<ul>
  <li>
    <p><code class="language-plaintext highlighter-rouge">Mock</code>ì€ í•´ë‹¹ ë©”ì†Œë“œê°€ ì˜ í˜¸ì¶œë˜ì—ˆëŠ”ì§€, ì–¼ë§ˆë‚˜ í˜¸ì¶œë˜ì—ˆëŠ”ì§€ê°€ ì¤‘ìš”í• ë•Œ ì“°ëŠ” ê²ƒì´ê³ ,</p>
  </li>
  <li>
    <p><code class="language-plaintext highlighter-rouge">Stub</code>ì€ ì‹¤ì œ ê°ì²´ ëŒ€ì‹  ê°€ì§œ ê°ì²´ë¥¼ ë„£ì–´ì•¼í•˜ëŠ”ë°, ì‹¤ì œ ë¡œì§ì€ í•„ìš”ì—†ê³ </p>
  </li>
</ul>

<p><br /></p>

<p>ë¦¬í„´ ê°’ ë˜ëŠ” ì½œë°±ì„ í†µí•´ ë°ì´í„°ë¥¼ ë°˜í™˜í•˜ëŠ” ê°€ì§œ ê°ì²´ê°€ í•„ìš”í• ë•Œ ì“°ì¸ë‹¤.</p>

<p><br /></p>

<h2 id="ë§ˆë¬´ë¦¬">ë§ˆë¬´ë¦¬</h2>

<p><code class="language-plaintext highlighter-rouge">TDD</code>ë¡œ ì‹œì‘í•´ì„œ <code class="language-plaintext highlighter-rouge">Unit Test</code>, <code class="language-plaintext highlighter-rouge">BDD</code> ë“±ì„ ì•Œê²Œ ë˜ì—ˆê³ ,</p>

<p>ì´ì œëŠ” <code class="language-plaintext highlighter-rouge">Test Double</code>ë„ ì•Œê²Œ ë˜ì—ˆë‹¤.</p>

<p><br /></p>

<p>ì•Œê²Œ ë˜ë©´ ë ìˆ˜ë¡ ì¬ë¯¸ë¥¼ ëŠë¼ê³  ìˆë‹¤.</p>

<p><br /></p>

<p>ì´ë²ˆ ê¸€ì„ í†µí•´ ë‹¤ë¥¸ ê°œë°œìì™€ ì˜ì‚¬ì†Œí†µì‹œ</p>

<p><code class="language-plaintext highlighter-rouge">Test Double</code> ì¢…ë¥˜ì— ë§ëŠ” ê²ƒì„ ì–˜ê¸°í•˜ë©´,</p>

<p>ì‚¬ì†Œí•˜ì§€ë§Œ ì¡°ê¸ˆì´ë¼ë„ ëª…í™•í•œ ì˜ì‚¬ì†Œí†µì„ í•  ìˆ˜ ìˆëŠ” í•œê±¸ìŒì„ ë‚´ë”˜ ê²ƒ ê°™ë‹¤.</p>

<p><br /></p>

<p>ë!</p>
</div>
  <div class="share-page">
  <span style="float: left;">Share this on &rarr;&nbsp;&nbsp;</span>

  <!-- Twitter -->
  <a href="https://twitter.com/share" class="twitter-share-button" data-via="">Tweet</a>
  <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>

  <!-- Facebook -->
  <div class="fb-share-button" data-href="http://localhost:4000/swift/2022/02/06/Swift-Test-Double(%E1%84%87%E1%85%AE%E1%84%8C%E1%85%A6-Mock-&-Stub-&-SPY-%E1%84%8B%E1%85%B5%E1%84%85%E1%85%A5%E1%86%AB%E1%84%80%E1%85%A6-%E1%84%86%E1%85%AF%E1%84%8C%E1%85%B5-).html" data-layout="button_count" style="position: relative; top: -8px; left: 3px;"></div>
</div>

<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/sdk.js#xfbml=1&version=v2.6&appId=";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>

</div>


  
    
      
        
          
      
    
  
    
      
        
          
      
    
  
    
      
        
          
      
    
  
    
      
        
          
      
    
  
    
      
        
          
            
            <div class="panel-body">
              <h4>Related Posts</h4>
              <ul>
            
                <li class="relatedPost">
                  <a href="http://localhost:4000/swift/2021/10/04/Swift-%EC%9D%BC%EA%B8%89-%EA%B0%9D%EC%B2%B4.html">Swift - ì¼ê¸‰ ê°ì²´</a>
                  
                    (Categories: <a href="/category/Swift">Swift</a>)
                  
                </li>
          
          
        
      
    
  
    
      
        
          
      
    
  
    
      
        
          
      
    
  
    
      
        
          
            
                <li class="relatedPost">
                  <a href="http://localhost:4000/swift/2021/08/21/swift-LOL-API-(%EC%9D%B8%EC%8A%A4%ED%84%B4%EC%8A%A4-%EC%83%9D%EC%84%B1).html">Swift - JSON ë°ì´í„° ì‰½ê²Œ ëª¨ë¸ ë§Œë“¤ê¸°(feat. QuickType)</a>
                  
                    (Categories: <a href="/category/Swift">Swift</a>)
                  
                </li>
          
          
        
      
    
  
    
      
        
          
            
                <li class="relatedPost">
                  <a href="http://localhost:4000/swift/2021/08/16/swift-%E1%84%82%E1%85%A2%E1%84%80%E1%85%A1-%E1%84%8A%E1%85%B3%E1%84%82%E1%85%B3%E1%86%AB-Network-Request-%E1%84%89%E1%85%B3%E1%84%90%E1%85%A1%E1%84%8B%E1%85%B5%E1%86%AF(Moya-%E1%84%8E%E1%85%A1%E1%86%A8%E1%84%8B%E1%85%A1%E1%86%AB).html">Swift - ë‚´ê°€ ì“°ëŠ” Network Request ìŠ¤íƒ€ì¼(Moya ì°©ì•ˆ)</a>
                  
                    (Categories: <a href="/category/Swift">Swift</a>)
                  
                </li>
          
          
        
      
    
  
    
      
        
          
      
    
  
    
      
        
          
            
                <li class="relatedPost">
                  <a href="http://localhost:4000/swift/2021/08/08/swift-SPM-%EB%A7%8C%EB%93%A4%EA%B8%B0(feat.-PropertyWrapper%ED%8E%B8).html">Swift - SPM ë§Œë“¤ê¸°(feat.  PropertyWrapperí¸)</a>
                  
                    (Categories: <a href="/category/Swift">Swift</a>)
                  
                </li>
          
          
        
      
    
  
    
      
        
          
            
                <li class="relatedPost">
                  <a href="http://localhost:4000/swift/2021/07/31/swift-SPM-%EB%A7%8C%EB%93%A4%EA%B8%B0.html">Swift - SPM ë§Œë“¤ê¸°</a>
                  
                    (Categories: <a href="/category/Swift">Swift</a>)
                  
                </li>
          
          
        
      
    
  
    
      
        
          
            
                <li class="relatedPost">
                  <a href="http://localhost:4000/swift/2021/07/18/swift-Property-Wrapper-(feat.-Codable-%EC%BD%94%EB%93%9C-%EC%A0%95%EB%A6%AC).html">Swift - Property Wrapper (feat. Codable ì½”ë“œ ì •ë¦¬)</a>
                  
                    (Categories: <a href="/category/Swift">Swift</a>)
                  
                </li>
          
          
        
      
    
  
    
      
        
          
      
    
  
    
      
        
          
      
    
  
    
      
        
          
      
    
  
    
      
        
          
      
    
  
    
      
        
          
      
    
  
    
      
        
          
      
    
        
          
      
    
  
    
      
        
          
      
    
        
          
      
    
  
    
      
        
          
      
    
        
          
      
    
  
    
      
        
          
      
    
        
          
      
    
  
    
      
        
          
      
    
        
          
      
    
  
    
      
        
          
      
    
        
          
      
    
  
    
      
        
          
      
    
  
    
      
        
          
      
    
  
    
      
        
          
      
    
        
          
      
    
  
    
      
        
          
      
    
        
          
      
    
  
    
      
        
          
      
    
  
    
      
        
          
      
    
  
    
      
        
          
      
    
  
    
      
        
          
      
    
  
    
      
        
          
      
    
  
    
      
        
          
      
    
  
    
      
        
          
      
    
  
    
      
        
          
      
    
  
    
      
        
          
      
    
  
    
      
        
          
      
    
  
    
      
        
          
      
    
  
    
      
        
          
      
    
  
    
      
        
          
      
    
  
    
      
        
          
      
    
  
    
      
        
          
      
    
  
    
      
        
          
      
    
  
    
      
        
          
      
    
  
    
      
        
          
      
    
  
    
      
        
          
      
    
  
    
      
        
          
      
    
  
    
      
        
          
      
    
  
    
      
        
          
      
    
  
  
  </ul>
</div>


<div class="PageNavigation">
  
    <a class="prev" href="/rxswift/2022/02/06/RxSwift-Single-%E1%84%8B%E1%85%A1%E1%86%AF%E1%84%8B%E1%85%A1%E1%84%87%E1%85%A9%E1%84%80%E1%85%B5(2).html">&laquo; (RxSwift) Single ì•Œì•„ë³´ê¸°(2)</a>
  
  
</div>

<div class="disqus-comments">
  <div id="disqus_thread"></div>
  <script type="text/javascript">
    /* <![CDATA[ */
    var disqus_shortname = "https-jiseobkim-github-io";
    var disqus_identifier = "http://localhost:4000_(Swift) Test Doubleì´ë€ (á„‡á…®á„Œá…¦- Mock, Stub, SPY á„‹á…µá„…á…¥á†«á„€á…¦ á„†á…¯á„Œá…µ?)";
    var disqus_title = "(Swift) Test Doubleì´ë€ (á„‡á…®á„Œá…¦- Mock, Stub, SPY á„‹á…µá„…á…¥á†«á„€á…¦ á„†á…¯á„Œá…µ?)";

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
    /* ]]> */
  </script>
</div>

        <footer>
          &copy; Jiseob Kim
          
            - <a href="https://github.com/JiSeobKim">https://github.com/JiSeobKim</a> - Powered by Jekyll.
          
          <div class="btn-github" style="float:right;">
            <iframe src="https://ghbtns.com/github-btn.html?user=agusmakmun&repo=agusmakmun.github.io&type=star&count=true" frameborder="0" scrolling="0" width="85" height="20px"></iframe>
            <iframe src="https://ghbtns.com/github-btn.html?user=agusmakmun&repo=agusmakmun.github.io&type=fork&count=true" frameborder="0" scrolling="0" width="85" height="20px"></iframe>
          </div>
        </footer>
      </div>
      <!-- end /.col-sm-8 -->
    </div>
    <!-- end /.container -->

    <!-- Bootstrap core JavaScript -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
    <script src="//code.jquery.com/jquery-migrate-1.2.1.min.js"></script>
    <script src="/static/js/bootstrap.min.js"></script>
    <script src="/static/js/super-search.js"></script>
    <script src="/static/js/thickbox-compressed.js"></script>
    <script src="/static/js/projects.js"></script>
  </body>
</html>

