<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="shortcut icon" href="/static/img/favicon.ico" />
    <title>Swift - ë‚´ê°€ ì“°ëŠ” Network Request ìŠ¤íƒ€ì¼(Moya ì°©ì•ˆ) - ğŸ˜€ğŸ˜ğŸ˜‰ JS ê°œë°œ ë¸”ë¡œê·¸ ğŸ˜ğŸ˜†ğŸ˜„</title>
    <meta name="author" content="Jiseob Kim" />
    <meta name="description" content="Swift - ë‚´ê°€ ì“°ëŠ” Network Request ìŠ¤íƒ€ì¼(Moya ì°©ì•ˆ)" />
    <meta name="keywords" content="Swift - ë‚´ê°€ ì“°ëŠ” Network Request ìŠ¤íƒ€ì¼(Moya ì°©ì•ˆ), ğŸ˜€ğŸ˜ğŸ˜‰ JS ê°œë°œ ë¸”ë¡œê·¸ ğŸ˜ğŸ˜†ğŸ˜„, Swift" />
    <link rel="alternate" type="application/rss+xml" title="RSS" href="/feed.xml">
    <meta content="" property="fb:app_id">
    <meta content="ğŸ˜€ğŸ˜ğŸ˜‰ JS ê°œë°œ ë¸”ë¡œê·¸ ğŸ˜ğŸ˜†ğŸ˜„" property="og:site_name">

    

    
      <meta content="Swift - ë‚´ê°€ ì“°ëŠ” Network Request ìŠ¤íƒ€ì¼(Moya ì°©ì•ˆ)" property="og:title">
      <meta content="article" property="og:type">
    

    
      <meta content="ë‚˜ë§Œì˜ ê³µê°„" property="og:description">
    

    
      <meta content="http://localhost:4000/swift/2021/08/16/swift-%E1%84%82%E1%85%A2%E1%84%80%E1%85%A1-%E1%84%8A%E1%85%B3%E1%84%82%E1%85%B3%E1%86%AB-Network-Request-%E1%84%89%E1%85%B3%E1%84%90%E1%85%A1%E1%84%8B%E1%85%B5%E1%86%AF(Moya-%E1%84%8E%E1%85%A1%E1%86%A8%E1%84%8B%E1%85%A1%E1%86%AB).html" property="og:url">
    

    
      <meta content="2021-08-16T00:00:00+09:00" property="article:published_time">
      <meta content="http://localhost:4000/about/" property="article:author">
    

    
      <meta content="http://localhost:4000/static/img/mainIcon2.png" property="og:image">
    

    
      
        <meta content="Swift" property="article:section">
      
    

    
      
    

    <meta name="twitter:card" content="summary">
    <meta name="twitter:site" content="@">
    <meta name="twitter:creator" content="@">

    
      <meta name="twitter:title" content="Swift - ë‚´ê°€ ì“°ëŠ” Network Request ìŠ¤íƒ€ì¼(Moya ì°©ì•ˆ)">
    

    
      <meta name="twitter:url" content="http://localhost:4000/swift/2021/08/16/swift-%E1%84%82%E1%85%A2%E1%84%80%E1%85%A1-%E1%84%8A%E1%85%B3%E1%84%82%E1%85%B3%E1%86%AB-Network-Request-%E1%84%89%E1%85%B3%E1%84%90%E1%85%A1%E1%84%8B%E1%85%B5%E1%86%AF(Moya-%E1%84%8E%E1%85%A1%E1%86%A8%E1%84%8B%E1%85%A1%E1%86%AB).html">
    

    
      <meta name="twitter:description" content="ë‚˜ë§Œì˜ ê³µê°„">
    

    

    <!-- Font awesome icons -->
    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
    <!-- syntax highlighting CSS -->
    <link rel="stylesheet" href="/static/css/syntax.css">
    <!-- Bootstrap core CSS -->
    <link href="/static/css/bootstrap.min.css" rel="stylesheet">
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css?family=Roboto+Condensed:400,300italic,300,400italic,700&amp;subset=latin,latin-ext" rel="stylesheet" type="text/css">
    <!-- Custom CSS -->
    <link rel="stylesheet" href="/static/css/super-search.css">
    <link rel="stylesheet" href="/static/css/thickbox.css">
    <link rel="stylesheet" href="/static/css/projects.css">
    <link rel="stylesheet" href="/static/css/main.css">

    
  </head>
  <body>
    <div class="container">
      <div class="col-sm-3">
        <div class="fixed-condition">
          <a href="/"><img class="profile-avatar" src="/static/img/mainIcon2.png" height="75px" width="75px" /></a>
          <h1 class="author-name">Jiseob Kim</h1>
          
            <div class="profile-about">
              iOS Developer
            </div>
          
          <div class="social">
            <ul>
              
                <li><a href="https://github.com/JiSeobKim" target="_blank"><i class="fa fa-github"></i></a></li>
              
            </ul>
          </div>
          <div class="search" id="js-search">
            <input type="text" placeholder="ê¸€ ê²€ìƒ‰í•˜ê¸°" class="search__input form-control" id="js-search__input">
            <ul class="search__results" id="js-search__results"></ul>
          </div>
          <hr />
          <ul class="sidebar-nav">
            <strong>Navigation</strong>
            <li><a href="/">Home</a></li>
            
              <li><a class="about" href="/category/Swift">Category</a></li>
            
              <li><a class="about" href="/about/">About Me</a></li>
            
          </ul>
        </div>
        <!-- end /.fixed-condition -->
      </div>
      <div class="col-sm-8 col-offset-1 main-layout">
        <header class="post-header">
  <h1 class="post-title">Swift - ë‚´ê°€ ì“°ëŠ” Network Request ìŠ¤íƒ€ì¼(Moya ì°©ì•ˆ)</h1>
</header>

<span class="time">16 Aug 2021</span>

  <span class="categories">
    &raquo; <a href="/category/Swift">Swift</a>
  </span>


<div class="content">
  <div class="post"><p>í†µì‹ ë¬¸ ê´€ë ¨í•´ì„œ ë‚´ê°€ ì“°ëŠ” ìŠ¤íƒ€ì¼ì„ ì ì€ ì ì´ ì—†ëŠ”ë“¯í•˜ì—¬</p>

<p>ì–¸ì  ê°„ í¬ìŠ¤íŒ… í•´ì•¼ì§€ ì‹¶ì—ˆëŠ”ë°</p>

<p><code class="language-plaintext highlighter-rouge">ë¡¤ API</code> ê´€ë ¨í•´ì„œ ì‘ì„±í•˜ë‹¤ê°€</p>

<p>ë§ˆì¹¨ API ê´€ë ¨ ê¸€ ì ë˜ ì¤‘ì´ë¼</p>

<p>í•œë²ˆ ì ê³  ë„˜ì–´ê°€ë©´ ì¢‹ì„ ë“¯ í•˜ì—¬ ì ê²Œ ë˜ì—ˆë‹¤.</p>

<p><br /></p>

<p>ì›ë˜ëŠ” <code class="language-plaintext highlighter-rouge">Alamofire</code>ë§Œ ì“°ë‹¤ê°€</p>

<p><code class="language-plaintext highlighter-rouge">Moya</code>ì— ëŒ€í•´ ì•Œê²Œ ë˜ê³ , ì ‘ê·¼ ë°©ì‹ì´ êµ‰ì¥íˆ ì¢‹ë‹¤ê³  ìƒê°ë˜ì—ˆë‹¤.</p>

<p><br /></p>

<p>ê·¸ë ‡ì§€ë§Œ, ë¯¸ìˆ™í•¨ì— ì˜í•´ì„œ ë¶ˆí¸í•¨ì„ ëŠê¼ˆê³ ,</p>

<p>ì¢€ë” ë‹¨ìˆœí™”í•˜ì ì‹¶ì–´ì„œ ë‹¤ìŒê³¼ ê°™ì€ ë°©ì‹ì„ ì“°ê²Œ ë˜ì—ˆë‹¤.</p>

<p><br /></p>

<p>*ps ê¸€ì˜ ê¸°ì¤€ì€ ë¡¤ API ê´€ë ¨ ë˜ì–´ ìˆìŒì„ ì°¸ê³ ë°”ëë‹ˆë‹¤.</p>

<hr />

<p><br /></p>

<h1 id="enumì„-ì‚¬ìš©í•˜ë‹¤">Enumì„ ì‚¬ìš©í•˜ë‹¤</h1>

<p>ê·¸ì „ì—” ë‹¨ìˆœíˆ <code class="language-plaintext highlighter-rouge">Moya</code>ì—ì„œ ì•„ì´ë””ì–´ë¥¼ ì°©ì•ˆí•˜ì—¬ ì“°ë‹¤ë³´ë‹ˆ</p>

<p>ê·¸ëƒ¥ ì¼ë‹¤. ì´ìœ ëŠ” ìƒê° ì•ˆí•˜ê³ !</p>

<p>ê·¸ëŸ°ë°,</p>

<p><code class="language-plaintext highlighter-rouge">Property Wrapper</code>í¸ ê³µë¶€í•˜ë‹¤ë³´ë‹ˆ</p>

<p>class, struct, enumìœ¼ë¡œ ì„ ì–¸í•˜ëŠ” ê²ƒë“¤ì¤‘</p>

<p>enum ì„ ì–¸ì€ class, structì™€ ë‹¤ë¥¸ ì ì´ìˆë‹¤.</p>

<p><br /></p>

<p>classì™€ structì˜ ê²½ìš° ë³„ë„ <code class="language-plaintext highlighter-rouge">init</code>ë¬¸ì„ ì‘ì„±í•˜ì§€ ì•Šì•„ë„</p>

<p>ê¸°ë³¸ê°’ì´ ëª¨ë‘ ì œê³µ ë˜ë©´ <code class="language-plaintext highlighter-rouge">default initializer</code>ë¥¼ ì œê³µí•˜ê³ ,</p>

<p><code class="language-plaintext highlighter-rouge">class</code>ì˜ ê²½ìš° ê¸°ë³¸ê°’ì´ ì œê³µ ë˜ì§€ ì•Šê³  ì´ˆê¸°í™” êµ¬ë¬¸ì´ ì—†ìœ¼ë©´ ì»´íŒŒì¼ ì—ëŸ¬ë¥¼ ë‚¸ë‹¤.</p>

<p><code class="language-plaintext highlighter-rouge">struct</code>ì˜ ê²½ìš° ê¸°ë³¸ê°’ì´ ì œê³µ ë˜ì§€ ì•Šìœ¼ë©´ ìë™ìœ¼ë¡œ <code class="language-plaintext highlighter-rouge">Memberwise initializer</code>ë¬¸ì´ ìƒì„±ëœë‹¤.</p>

<blockquote>
  <p>ìœ„ ë‚´ìš©ì€ ìš”ì¦˜ ê³µì‹ ë¬¸ì„œë¡œ ê³µë¶€í•˜ë‹¤ë³´ë‹ˆ ì¢€ë” ëª…í™•í•˜ê²Œ ì•Œê²Œ ë˜ì—ˆë‹¤.</p>
</blockquote>

<p><br /></p>

<p>ì—¬ê¸°ì„œ <code class="language-plaintext highlighter-rouge">enum</code>ì˜ ì°¨ì´ëŠ” ë³„ë„ì˜ ì´ˆê¸°í™”ê°€ ìë™ìœ¼ë¡œ ìƒì„±ë˜ì§€ë„ ì•Šìœ¼ë©°,</p>

<p>ì»´íŒŒì¼ ì—ëŸ¬ê°€ ë‚˜ì§€ ì•ŠëŠ”ë‹¤ëŠ” ê²ƒì´ë‹¤.</p>

<p><br /></p>

<p>ì´ì— ì¥ì ì€ <code class="language-plaintext highlighter-rouge">case</code>ì— ë³´ë‹¤ ì§‘ì¤‘í•  ìˆ˜ ìˆë‹¤ëŠ” ì ì´ë‹¤.</p>

<p><br /></p>

<p>ê·¸ë˜ì„œ <code class="language-plaintext highlighter-rouge">Enum</code>ì„ ì“°ë‚˜ë³´ë‹¤.</p>

<p>ì´ì œ ì°¨ê·¼ì°¨ê·¼ ì½”ë“œë¥¼ ë³´ì.</p>

<p><br /></p>

<hr />

<p><br /></p>

<h1 id="case-ì •ì˜">Case ì •ì˜</h1>

<p><br /></p>

<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="kd">import</span> <span class="kt">Alamofire</span>
<span class="kd">import</span> <span class="kt">Foundation</span>

<span class="c1">/// ì—ëŸ¬ ì •ì˜</span>
<span class="kd">enum</span> <span class="kt">NetworkError</span><span class="p">:</span> <span class="kt">Error</span> <span class="p">{</span>
    <span class="k">case</span> <span class="n">notValidateStatusCode</span>  <span class="c1">// ìœ íš¨í•˜ì§€ ì•ŠëŠ” StatusCode</span>
    <span class="k">case</span> <span class="n">noData</span>                 <span class="c1">// ê²°ê³¼ ë°ì´í„° ë¯¸ì¡´ì¬</span>
    <span class="k">case</span> <span class="n">failDecode</span>             <span class="c1">// Decode ì‹¤íŒ¨</span>
<span class="p">}</span>

<span class="c1">/// í†µì‹  Enum</span>
<span class="kd">enum</span> <span class="kt">API</span> <span class="p">{</span>
    <span class="c1">/// ìœ ì € ì •ë³´ê°€ì ¸ì˜¤ê¸°</span>
    <span class="k">case</span> <span class="nf">getUserInfo</span><span class="p">(</span><span class="nv">name</span><span class="p">:</span> <span class="kt">String</span><span class="p">)</span>
    <span class="c1">/// ì±”í”¼ì–¸ ë¦¬ìŠ¤íŠ¸ ê°€ì ¸ì˜¤ê¸°</span>
    <span class="k">case</span> <span class="n">getChampionList</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="enum---error">Enum - Error</h3>

<p><code class="language-plaintext highlighter-rouge">Result</code>ë¥¼ ì‚¬ìš©í•˜ê²Œ ë í…ë°, ì´ ë¶€ë¶„ì€ ë‚˜ì¤‘ì— ë”°ë¡œ í¬ìŠ¤íŒ…í•˜ê¸°ë¡œí•˜ê³ ,,</p>

<p>ë§ ê·¸ëŒ€ë¡œ ê²°ê³¼ì— ëŒ€í•´ ì •ì˜í•˜ê¸° ì¢‹ë‹¤.</p>

<p>ì„±ê³µê³¼ ì‹¤íŒ¨ë¥¼ ë‚˜ëˆ ì„œ ë³´ë‚´ê¸°ë•Œë¬¸ì— <code class="language-plaintext highlighter-rouge">swich</code>ë¬¸ê³¼ ì°°ë–¡ì´ë‹¤,</p>

<blockquote>
  <p><code class="language-plaintext highlighter-rouge">Almofire</code>ì—ì„œ ë¨¼ì € ì‘ì„±ë˜ì—ˆëŠ”ë° <code class="language-plaintext highlighter-rouge">Swift</code>ì—ë„ ë‚˜ì¤‘ì— ì¶”ê°€ëœê²ƒìœ¼ë¡œ ì•Œê³  ìˆë‹¤.</p>
</blockquote>

<p><br /></p>

<p>ìœ„ì— ë§í–ˆë“¯ì´ ì‹¤íŒ¨ì— ëŒ€í•´ì„œ ì •ì˜ë¥¼ í•´ì•¼í•œë‹¤. ì´ëŠ” <code class="language-plaintext highlighter-rouge">Error</code>ë¡œ ì •ì˜ë˜ì–´ì•¼ í•˜ë¯€ë¡œ,</p>

<p>ìœ„ì— <code class="language-plaintext highlighter-rouge">NetworkError: Error</code> ë¼ëŠ” ì—´ê±°í˜•ì„ í•˜ë‚˜ ìƒì„±í•˜ê²Œ ë˜ì—ˆë‹¤.</p>

<p>ë‚´ìš©ì€ ì£¼ì„ê³¼ ê°™ìœ¼ë¯€ë¡œ íŒ¨ì“°.</p>

<p><br /></p>

<h3 id="enum---api">Enum - API</h3>

<p>ì—¬ê¸°ì— APIë“¤ì´ ì°¨ê³¡ ì°¨ê³¡ ì¶”ê°€ ë˜ë©´ ëœë‹¤</p>

<ul>
  <li>ì†Œí™˜ì‚¬ ì •ë³´ ê°€ì ¸ì˜¤ê¸°</li>
  <li>ì±”í”¼ì–¸ ë¦¬ìŠ¤íŠ¸ ê°€ì ¸ì˜¤ê¸°</li>
</ul>

<p><br /></p>

<p>ë‘ê°€ì§€ì— ëŒ€í•´ ìš°ì„  ì •ì˜í•´ë‘ì—ˆìœ¼ë©°,</p>

<p>íŒŒë¼ë¯¸í„°ê°€ í•„ìš”í•œ ì†Œí™˜ì‚¬ ì •ë³´ ê°€ì ¸ì˜¤ëŠ” APIëŠ”</p>

<p><code class="language-plaintext highlighter-rouge">Associate Value</code>(name: String)ë¥¼ ë„£ì–´ì¤Œìœ¼ë¡œì¨ í•„ìš”í•œ ê°’ë“¤ì„ ë°›ì„ ìˆ˜ ìˆê²Œ ëœë‹¤.</p>

<p><br /></p>

<p>APIì˜ ì¢…ë¥˜ë¥¼ ì •ì˜í•´ì¤¬ìœ¼ë‹ˆ,</p>

<p>í†µì‹ ì— í•„ìš”í•œ ê²ƒë“¤ì„ ì •ì˜í•´ë³´ì.</p>

<p><br /></p>

<hr />

<p><br /></p>

<h1 id="í†µì‹ ì—-í•„ìš”í•œ-ì •ë³´-ì •ì˜">í†µì‹ ì— í•„ìš”í•œ ì •ë³´ ì •ì˜</h1>

<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// MARK: í†µì‹  í•„ìš” ì •ë³´ ê´€ë ¨</span>
<span class="kd">extension</span> <span class="kt">API</span> <span class="p">{</span>
    <span class="c1">/// API Key</span>
    <span class="kd">private</span> <span class="k">var</span> <span class="nv">key</span><span class="p">:</span> <span class="kt">String</span> <span class="p">{</span><span class="s">"ë°œê¸‰ ë°›ì€ API í‚¤"</span><span class="p">}</span>
    
    <span class="c1">/// ë„ë©”ì¸</span>
    <span class="kd">private</span> <span class="k">var</span> <span class="nv">domain</span><span class="p">:</span> <span class="kt">String</span> <span class="p">{</span>
        <span class="k">switch</span> <span class="k">self</span> <span class="p">{</span>
        <span class="k">case</span> <span class="o">.</span><span class="nv">getUserInfo</span><span class="p">:</span>
            <span class="k">return</span> <span class="s">"https://kr.api.riotgames.com"</span>
        <span class="k">case</span> <span class="o">.</span><span class="nv">getChampionList</span><span class="p">:</span>
            <span class="k">return</span> <span class="s">"http://ddragon.leagueoflegends.com"</span>
        <span class="p">}</span>
    <span class="p">}</span>
    
    <span class="c1">/// URL Path</span>
    <span class="kd">private</span> <span class="k">var</span> <span class="nv">path</span><span class="p">:</span> <span class="kt">String</span> <span class="p">{</span>
        <span class="k">switch</span> <span class="k">self</span> <span class="p">{</span>
        <span class="k">case</span> <span class="o">.</span><span class="nf">getUserInfo</span><span class="p">(</span><span class="nv">name</span><span class="p">:</span> <span class="k">let</span> <span class="nv">name</span><span class="p">):</span>
            <span class="k">return</span> <span class="s">"/lol/summoner/v4/summoners/by-name/</span><span class="se">\(</span><span class="n">name</span><span class="se">)</span><span class="s">"</span>
        <span class="k">case</span> <span class="o">.</span><span class="nv">getChampionList</span><span class="p">:</span>
            <span class="k">return</span> <span class="s">"/cdn/11.16.1/data/en_US/champion.json"</span>
        <span class="p">}</span>
    <span class="p">}</span>
    
    <span class="c1">/// HTTP ë©”ì†Œë“œ</span>
    <span class="kd">private</span> <span class="k">var</span> <span class="nv">method</span><span class="p">:</span> <span class="kt">Alamofire</span><span class="o">.</span><span class="kt">HTTPMethod</span> <span class="p">{</span>
        <span class="k">switch</span> <span class="k">self</span> <span class="p">{</span>
        <span class="k">case</span> <span class="o">.</span><span class="n">getUserInfo</span><span class="p">,</span> <span class="o">.</span><span class="nv">getChampionList</span><span class="p">:</span>
            <span class="k">return</span> <span class="o">.</span><span class="k">get</span>
        <span class="p">}</span>
    <span class="p">}</span>
    
    <span class="c1">/// API Key í•„ìš” ì—¬ë¶€</span>
    <span class="kd">private</span> <span class="k">var</span> <span class="nv">isNeedAPIKey</span><span class="p">:</span> <span class="kt">Bool</span> <span class="p">{</span>
        <span class="k">switch</span> <span class="k">self</span> <span class="p">{</span>
        <span class="k">case</span> <span class="o">.</span><span class="nv">getUserInfo</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">true</span>
        <span class="k">default</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">false</span>
        <span class="p">}</span>
    <span class="p">}</span>
    
    <span class="c1">/// í†µì‹  í—¤ë”</span>
    <span class="kd">private</span> <span class="k">var</span> <span class="nv">header</span><span class="p">:</span> <span class="kt">HTTPHeaders</span> <span class="p">{</span>
        
        <span class="k">var</span> <span class="nv">result</span> <span class="o">=</span> <span class="kt">HTTPHeaders</span><span class="p">([</span>
            <span class="kt">HTTPHeader</span><span class="p">(</span><span class="nv">name</span><span class="p">:</span><span class="s">"Accept-Language"</span><span class="p">,</span> <span class="nv">value</span><span class="p">:</span> <span class="s">"ko-KR,ko;q=0.9"</span><span class="p">),</span>
            <span class="kt">HTTPHeader</span><span class="p">(</span><span class="nv">name</span><span class="p">:</span><span class="s">"Accept-Charset"</span><span class="p">,</span> <span class="nv">value</span><span class="p">:</span> <span class="s">"application/x-www-form-urlencoded; charset=UTF-8"</span><span class="p">),</span>
            <span class="kt">HTTPHeader</span><span class="p">(</span><span class="nv">name</span><span class="p">:</span><span class="s">"Origin"</span><span class="p">,</span> <span class="nv">value</span><span class="p">:</span> <span class="s">"https://developer.riotgames.com"</span><span class="p">)</span>
        <span class="p">])</span>
        
        <span class="k">if</span> <span class="n">isNeedAPIKey</span> <span class="p">{</span>
            <span class="n">result</span><span class="o">.</span><span class="nf">add</span><span class="p">(</span><span class="kt">HTTPHeader</span><span class="p">(</span><span class="nv">name</span><span class="p">:</span> <span class="s">"X-Riot-Token"</span><span class="p">,</span> <span class="nv">value</span><span class="p">:</span> <span class="n">key</span><span class="p">))</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="n">result</span>
    <span class="p">}</span>
    
    <span class="c1">/// Body Parameter - ì£¼ë¡œ Getìœ¼ë¡œ ì˜ˆìƒë˜ì–´ í•„ìš” x</span>
    <span class="kd">private</span> <span class="k">var</span> <span class="nv">parameter</span><span class="p">:</span> <span class="p">[</span><span class="kt">String</span><span class="p">:</span><span class="kt">Any</span><span class="p">]?</span> <span class="p">{</span>
        <span class="k">switch</span> <span class="k">self</span> <span class="p">{</span>
        <span class="k">case</span> <span class="o">.</span><span class="nv">getUserInfo</span><span class="p">:</span> <span class="k">return</span> <span class="kc">nil</span>
        <span class="k">case</span> <span class="o">.</span><span class="nv">getChampionList</span><span class="p">:</span> <span class="k">return</span> <span class="kc">nil</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>í†µì‹ í•˜ë©´ì„œ ê¸°ë³¸ì ìœ¼ë¡œ í•„ìš”í•œ ê²ƒë“¤ì„ ì •ì˜ í•´ë‘”ê²ƒì´ë‹¤.</p>

<p>ê±°ì˜ <code class="language-plaintext highlighter-rouge">Moya</code>ì™€ ê°™ë‹¤ê³  ë´ì•¼í•œë‹¤.</p>

<p>ì´ ë¶€ë¶„ì´ ë„ˆë¬´ ë§¤ë ¥ì ì´ ì—ˆìœ¼ë‹ˆê¹!</p>

<p><br /></p>

<p>ê·¸ë¦¬ê³  ì—°ì‚° í”„ë¡œí¼í‹°ë“¤ì´ ë‹¤ ìê¸° ìì‹  <code class="language-plaintext highlighter-rouge">enum</code>ì— ì—°ê´€ë˜ì–´ ìˆìœ¼ë¯€ë¡œ,</p>

<p>ìƒˆë¡œìš´ <code class="language-plaintext highlighter-rouge">API</code>ê°€ <code class="language-plaintext highlighter-rouge">case</code>ë¡œ ì¶”ê°€ë  ê²½ìš° ì—¬ê¸° ë¶€ë¶„ë“¤ì´ ì „ë¶€</p>

<p><code class="language-plaintext highlighter-rouge">ì»´íŒŒì¼ì—ëŸ¬</code>ë¥¼ ë±‰ê²Œ ë˜ë¯€ë¡œ ì‹¤ìˆ˜ ì—†ì´ ë‹¤ ì •ì˜ë¥¼ í•´ì¤˜ì•¼í•œë‹¨ ì ì´ ìˆë‹¤.</p>

<blockquote>
  <p>í”„ë¡œí† ì½œ ë§ˆëƒ¥ ê°•ì••ì ì¸ê²ƒ ì•„ì£¼ ì¢‹ì•„.</p>
</blockquote>

<p><br /></p>

<p>ê·¸ë¦¬ê³  <code class="language-plaintext highlighter-rouge">case</code>ì— ë”°ë¼ ë‹¤ë¥´ê²Œ <code class="language-plaintext highlighter-rouge">return</code>í•˜ê²Œ ëœë‹¤.</p>

<blockquote>
  <p>ì™¸ë¶€ì—ì„  ë”°ë¡œ í˜¸ì¶œë  ì´ìœ ê°€ ì—†ê¸°ì— ëª¨ë‘ <code class="language-plaintext highlighter-rouge">private</code> ì²˜ë¦¬</p>
</blockquote>

<p><br /></p>

<hr />

<p><br /></p>

<h1 id="request-ì •ì˜">Request ì •ì˜</h1>

<p>ì´ ë¶€ë¶„ì€ 2ê°€ì§€ë¡œ ë‚˜ëˆŒ ìˆ˜ ìˆì„ ê²ƒ ê°™ë‹¤.</p>

<ul>
  <li>ë‹¨ìˆœ ê²°ê³¼ë¥¼ NSDictionaryë¡œ ì–»ê¸°</li>
  <li>ê²°ê³¼ë¥¼ ì›í•˜ëŠ” ê°ì²´ë¡œ ë°›ê¸°</li>
</ul>

<p><br /></p>

<p><code class="language-plaintext highlighter-rouge">Codable</code> ê´€ë ¨í•´ì„  í¬ìŠ¤íŒ…í•œì ì´ ìˆë‹¤. <a href="https://jiseobkim.github.io/swift/2018/07/21/swift-Alamofireì™€-Codable.html">í¬ìŠ¤íŒ…</a></p>

<p>ê·¼ë°, íšŒì‚¬ì—ì„œ ì“°ë‹¤ë³´ë‹ˆ ì •ë§ ë‹¨ìˆœí•œê±´ ê·¸ëƒ¥ <code class="language-plaintext highlighter-rouge">NSDictionary</code>ë¡œ ì²˜ë¦¬í•˜ëŠ”ê²Œ í¸í• ë•Œê°€ ìˆì—ˆë‹¤.</p>

<p>ê·¸ë˜ì„œ ë² ì´ìŠ¤ë¥¼ <code class="language-plaintext highlighter-rouge">NSDictionary</code>ë¡œ ì²˜ë¦¬í•˜ëŠ”ê±¸ ë² ì´ìŠ¤ë¡œ ì¡ì•˜ë‹¤.</p>

<p><br /></p>

<h3 id="nsdictionaryë¥¼-ì´ìš©í•œ-í´ë¡œì €">NSDictionaryë¥¼ ì´ìš©í•œ í´ë¡œì €</h3>

<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">/// í†µì‹  ìš”ì²­</span>
<span class="c1">/// - Parameter complete: ê²°ê³¼ í´ë¡œì € - ì„±ê³µì‹œ NSDictionary, ì‹¤íŒ¨ì‹œ ì •ì˜ í•´ë‘” ì—ëŸ¬</span>
<span class="kd">func</span> <span class="nf">request</span><span class="p">(</span><span class="nv">complete</span><span class="p">:</span> <span class="kd">@escaping</span> <span class="p">((</span><span class="kt">Result</span><span class="o">&lt;</span><span class="kt">NSDictionary</span><span class="p">?,</span><span class="kt">NetworkError</span><span class="o">&gt;</span><span class="p">)</span><span class="o">-&gt;</span><span class="p">()))</span> <span class="p">{</span>
    <span class="k">var</span> <span class="nv">url</span> <span class="o">=</span> <span class="n">domain</span>
    
    <span class="k">if</span> <span class="k">let</span> <span class="nv">convertedPath</span> <span class="o">=</span> <span class="n">path</span><span class="o">.</span><span class="nf">addingPercentEncoding</span><span class="p">(</span><span class="nv">withAllowedCharacters</span><span class="p">:</span> <span class="o">.</span><span class="n">urlPathAllowed</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">url</span> <span class="o">+=</span> <span class="n">convertedPath</span>
    <span class="p">}</span>
    <span class="kt">AF</span><span class="o">.</span><span class="nf">request</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="nv">method</span><span class="p">:</span> <span class="n">method</span><span class="p">,</span> <span class="nv">parameters</span><span class="p">:</span> <span class="n">parameter</span><span class="p">,</span> <span class="nv">headers</span><span class="p">:</span> <span class="n">header</span><span class="p">)</span>
        <span class="o">.</span><span class="n">responseJSON</span> <span class="p">{</span> <span class="n">response</span> <span class="k">in</span>
            
            <span class="c1">// í†µì‹  ê²°ê³¼ ì²˜ë¦¬</span>
            <span class="k">switch</span> <span class="n">response</span><span class="o">.</span><span class="n">result</span> <span class="p">{</span>
            <span class="k">case</span> <span class="o">.</span><span class="nf">success</span><span class="p">(</span><span class="k">let</span> <span class="nv">dict</span><span class="p">):</span>
                <span class="c1">// ì„±ê³µ</span>
                <span class="nf">complete</span><span class="p">(</span><span class="o">.</span><span class="nf">success</span><span class="p">(</span><span class="n">dict</span> <span class="k">as?</span> <span class="kt">NSDictionary</span><span class="p">))</span>
            <span class="k">case</span> <span class="o">.</span><span class="nv">failure</span><span class="p">:</span>
                
                <span class="c1">// ê²°ê³¼ëŠ” ì—†ì§€ë§Œ statusCodeì— ë”°ë¼ í™•ì¸ì´ í•„ìš”í•  ìˆ˜ ìˆìŒ.</span>
                <span class="k">if</span> <span class="k">let</span> <span class="nv">stCode</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">response</span><span class="p">?</span><span class="o">.</span><span class="n">statusCode</span><span class="p">,</span> <span class="mi">200</span><span class="o">..&lt;</span><span class="mi">300</span> <span class="o">~=</span> <span class="n">stCode</span> <span class="p">{</span>
                    <span class="c1">// ì„±ê³µ</span>
                    <span class="nf">complete</span><span class="p">(</span><span class="o">.</span><span class="nf">success</span><span class="p">(</span><span class="kc">nil</span><span class="p">))</span>
                <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                    <span class="c1">// ì§„ì§œ ì‹¤íŒ¨</span>
                    <span class="nf">complete</span><span class="p">(</span><span class="o">.</span><span class="nf">failure</span><span class="p">(</span><span class="o">.</span><span class="n">notValidateStatusCode</span><span class="p">))</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p><br /></p>

<p>ìœ„ì™€ ê°™ì´ ë©”ì†Œë“œë¥¼ ë§Œë“¤ ìˆ˜ ìˆëŠ”ë°,</p>

<p>íŒŒë¼ë¯¸í„°ëŠ” ë‹¨ìˆœí•˜ê²Œ <code class="language-plaintext highlighter-rouge">Result</code>ë¥¼ ì¸ìë¡œ ê°–ëŠ” í´ë¡œì €ë‹¤.</p>

<p><br /></p>

<p>ì´ë•Œ, ì„±ê³µì‹œ <code class="language-plaintext highlighter-rouge">NSDictionary</code> ë±‰ê³ , ì‹¤íŒ¨ì‹œ ìœ„ì— ì„ ì–¸ í•´ë‘” <code class="language-plaintext highlighter-rouge">NetworkError</code>ë¥¼ ë±‰ê²Œ ëœë‹¤.</p>

<p>ì£¼ì„ì„ ê°„ë‹¨íˆ ì„¤ëª…í•˜ë©´ ë‹¤ìŒê³¼ ê°™ë‹¤</p>

<ul>
  <li><strong>1,2:</strong> ë„ë©”ì¸ì„ ê°€ì ¸ì˜¤ê³  <code class="language-plaintext highlighter-rouge">path</code>ì™€ ì¡°í•©ì„ í•´ì•¼í•˜ëŠ”ë°, í•œê¸€ì´ ë“¤ì–´ê°ˆ ìˆ˜ ìˆìœ¼ë‹ˆ ì¸ì½”ë”©í•´ì„œ ì •ì˜</li>
  <li><strong>3:</strong> ì‹¤ì§ˆì  ìš”ì²­ì¸ë° ì´ë•Œ, ìœ„ì— ì •ì˜í•´ë‘” <code class="language-plaintext highlighter-rouge">url</code>, <code class="language-plaintext highlighter-rouge">method</code>, <code class="language-plaintext highlighter-rouge">parameter</code>ë“±ì„ ì¡°í•©í•˜ê²Œ ëœë‹¤.</li>
  <li><strong>4:</strong> <code class="language-plaintext highlighter-rouge">Alamfore</code>ë„ <code class="language-plaintext highlighter-rouge">Result</code> í˜•ì‹ì„ ì“°ê²Œ ë˜ë©° <code class="language-plaintext highlighter-rouge">switch</code>ë¡œ ì„±ê³µê³¼ ì‹¤íŒ¨ì— ëŒ€ì‘í•œë‹¤.</li>
  <li><strong>5:</strong> <code class="language-plaintext highlighter-rouge">responseJSON</code>ì´ê¸° ë•Œë¬¸ì— <code class="language-plaintext highlighter-rouge">Any</code>ë¡œ ì˜¨ê²ƒì„ <code class="language-plaintext highlighter-rouge">NSDictionary</code>ë¡œ ìºìŠ¤íŒ…í•˜ì—¬ í´ë¡œì €ë¥¼ ì´ìš©</li>
  <li><strong>6:</strong> ê°„í˜¹ ìˆëŠ” ê²½ìš°ì¸ë°, ì„±ê³µë§Œí•˜ê³  <code class="language-plaintext highlighter-rouge">response</code>ë¥¼ ì•ˆì£¼ëŠ” ê²½ìš°ê°€ ìˆì—ˆë‹¤.(ë¡¤ APIë§ê³ !)
ì´ëŸ´ ê²½ìš° ì´ <code class="language-plaintext highlighter-rouge">switch</code>ë¬¸ì—ì„  ì‹¤íŒ¨ë¡œ ë–¨ì–´ì§€ì§€ë§Œ, ì‹¤ì œë¡  ì„±ê³µì´ê¸° ë•Œë¬¸ì— <code class="language-plaintext highlighter-rouge">statusCode</code>ë¥¼ ì²´í¬í•´ì¤¬ë‹¤.</li>
  <li><strong>7:</strong> ì„±ê³µ ë²”ìœ„ì˜ ì½”ë“œì´ë¯€ë¡œ ì„±ê³µ</li>
  <li><strong>8:</strong> ì´ê±´ ì§„ì§œ ì‹¤íŒ¨ë‹¤. ìœ íš¨í•˜ì§€ ì•ŠëŠ” <code class="language-plaintext highlighter-rouge">StatusCode</code>ë¼ëŠ” ì—ëŸ¬ ì¼€ì´ìŠ¤ë¥¼ ì‚¬ìš©í–ˆë‹¤.</li>
</ul>

<p><br /></p>

<h3 id="genericì„-ì´ìš©í•œ-í´ë¡œì €">Genericì„ ì´ìš©í•œ í´ë¡œì €</h3>

<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">/// í†µì‹  ìš”ì²­ (with Generic)</span>
<span class="c1">/// - Parameters:</span>
<span class="c1">///     - dataType: Genericìœ¼ë¡œ ì„ ì–¸ëœ ìë£Œí˜•ì˜ íƒ€ì…ì„ ë°›ëŠ”ë‹¤.</span>
<span class="c1">///     - complete: í´ë¡œì € - ì„±ê³µì‹œ Tì˜ ê°ì²´, ì‹¤íŒ¨ì‹œ ì„ ì–¸í•´ë‘” ì—ëŸ¬</span>
<span class="kd">func</span> <span class="n">request</span><span class="o">&lt;</span><span class="kt">T</span><span class="p">:</span> <span class="kt">Decodable</span><span class="o">&gt;</span><span class="p">(</span><span class="nv">dataType</span><span class="p">:</span> <span class="kt">T</span><span class="o">.</span><span class="k">Type</span><span class="p">,</span> <span class="nv">complete</span><span class="p">:</span> <span class="kd">@escaping</span> <span class="p">((</span><span class="kt">Result</span><span class="o">&lt;</span><span class="kt">T</span><span class="p">,</span><span class="kt">NetworkError</span><span class="o">&gt;</span><span class="p">)</span><span class="o">-&gt;</span><span class="p">()))</span> <span class="p">{</span>
    
    <span class="c1">// 1. ìœ„ì— ì„ ì–¸í•œ ìš”ì²­ ë©”ì†Œë“œë¥¼ í†µí•´ NSDictionaryë¥¼ ë°›ëŠ”ë‹¤.</span>
    <span class="n">request</span> <span class="p">{</span> <span class="n">result</span> <span class="k">in</span>
        <span class="k">switch</span> <span class="n">result</span> <span class="p">{</span>
        <span class="k">case</span> <span class="o">.</span><span class="nf">success</span><span class="p">(</span><span class="k">let</span> <span class="nv">dict</span><span class="p">):</span>
            
            <span class="c1">// 2. ë°ì´í„° ì¡´ì¬ í™•ì¸</span>
            <span class="k">guard</span> <span class="k">let</span> <span class="nv">dicData</span> <span class="o">=</span> <span class="n">dict</span> <span class="k">else</span> <span class="p">{</span>
                <span class="c1">// ë°ì´í„° ë¯¸ì¡´ì¬ ì—ëŸ¬</span>
                <span class="nf">complete</span><span class="p">(</span><span class="o">.</span><span class="nf">failure</span><span class="p">(</span><span class="o">.</span><span class="n">noData</span><span class="p">))</span>
                <span class="k">return</span>
            <span class="p">}</span>
            
            <span class="c1">// 3. ì–»ì€ NSDictionaryë¥¼ JSON ë°ì´í„°ë¡œ ë°”ê¾¼ë’¤ Tí˜•íƒœë¡œ Decode í•´ì¤€ë‹¤.</span>
            <span class="k">guard</span>
                <span class="k">let</span> <span class="nv">json</span> <span class="o">=</span> <span class="k">try</span><span class="p">?</span> <span class="kt">JSONSerialization</span><span class="o">.</span><span class="nf">data</span><span class="p">(</span><span class="nv">withJSONObject</span><span class="p">:</span> <span class="n">dicData</span><span class="p">,</span> <span class="nv">options</span><span class="p">:</span> <span class="o">.</span><span class="n">prettyPrinted</span><span class="p">),</span>
                <span class="k">let</span> <span class="nv">data</span> <span class="o">=</span> <span class="k">try</span><span class="p">?</span> <span class="kt">JSONDecoder</span><span class="p">()</span><span class="o">.</span><span class="nf">decode</span><span class="p">(</span><span class="kt">T</span><span class="o">.</span><span class="k">self</span><span class="p">,</span> <span class="nv">from</span><span class="p">:</span> <span class="n">json</span><span class="p">)</span>
            <span class="k">else</span> <span class="p">{</span>
                <span class="c1">// 4. Decodeì‹¤íŒ¨</span>
                <span class="nf">complete</span><span class="p">(</span><span class="o">.</span><span class="nf">failure</span><span class="p">(</span><span class="o">.</span><span class="n">failDecode</span><span class="p">))</span>
                <span class="k">return</span>
            <span class="p">}</span>
            
            <span class="c1">// 5. T ê°ì²´ ìƒì„± ì„±ê³µ!</span>
            <span class="nf">complete</span><span class="p">(</span><span class="o">.</span><span class="nf">success</span><span class="p">(</span><span class="n">data</span><span class="p">))</span>
            
        <span class="k">case</span> <span class="o">.</span><span class="nf">failure</span><span class="p">(</span><span class="k">let</span> <span class="nv">e</span><span class="p">):</span>
            <span class="c1">// 6. Request ì‹¤íŒ¨</span>
            <span class="nf">complete</span><span class="p">(</span><span class="o">.</span><span class="nf">failure</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>

</code></pre></div></div>

<p><br /></p>

<p>ì§€ë‚œ <a href="https://jiseobkim.github.io/swift/2018/07/21/swift-Alamofireì™€-Codable.html">í¬ìŠ¤íŒ…</a> ë¶€ë¶„ì— ìì„¸í•œê±´ ì í˜€ìˆì§€ë§Œ ê°„ë‹¨í•˜ê²Œ ì„¤ëª…í•˜ë©´ ë‹¤ìŒê³¼ ê°™ë‹¤.</p>

<p><br /></p>

<p><strong>ë©”ì†Œë“œ ì„ ì–¸ ë¶€ë¶„</strong></p>
<ul>
  <li>ë©”ì†Œë“œì— ì œë„¤ë¦­ ì‚¬ìš©, <code class="language-plaintext highlighter-rouge">T</code>ëŠ” <code class="language-plaintext highlighter-rouge">Decodable</code>ì„ ì¤€ìˆ˜í•œë‹¤.</li>
  <li>ë°›ê³  ì‹¶ì€ ê°ì²´ì˜ íƒ€ì…ì„ <code class="language-plaintext highlighter-rouge">dataType</code>ìœ¼ë¡œ íŒŒë¼ë¯¸í„°ë¡œ ë°›ëŠ”ë‹¤.</li>
  <li>ì„±ê³µ ì—¬ë¶€ì— ë”°ë¼ ì‘ë‹µê°’ì„ ì›í•˜ëŠ” ê°ì²´ë¡œ ë‹´ê±°ë‚˜ ë˜ëŠ” ì—ëŸ¬ë¥¼ <code class="language-plaintext highlighter-rouge">Result</code>ë¡œ ê°ì‹¼ ì¸ìë¥¼ ë‹´ëŠ” í´ë¡œì €ë‹¤.</li>
</ul>

<p><br /> 
<strong>ë©”ì†Œë“œ ë‚´ìš©</strong></p>
<ul>
  <li><strong>1:</strong> ì´ APIì— í˜¸ì¶œì€ ê·¸ì „ì— <code class="language-plaintext highlighter-rouge">NSDictionary</code>ë¡œ ì²˜ë¦¬í•˜ëŠ” ë©”ì†Œë“œì—ì„œ ëë‚¬ë‹¤. í˜¸ì¶œë§Œ í•´ì„œ <code class="language-plaintext highlighter-rouge">NSDictionary</code>ë¥¼ ì²˜ë¦¬í•˜ì.</li>
  <li><strong>2:</strong> <code class="language-plaintext highlighter-rouge">NSDictionary</code>ê°€ ì˜ ì™”ëŠ”ì§€ í™•ì¸</li>
  <li><strong>3:</strong> <code class="language-plaintext highlighter-rouge">NSDictionary</code>ë¥¼ <code class="language-plaintext highlighter-rouge">Data</code>ë¡œ ë°”ê¾¸ê³ , <code class="language-plaintext highlighter-rouge">JSONDecoder</code>ë¥¼ ì´ìš©í•´ <code class="language-plaintext highlighter-rouge">Data</code>ë¥¼ <code class="language-plaintext highlighter-rouge">T</code>ë¡œ ì–»ì–´ë‚¸ë‹¤.</li>
  <li><strong>4:</strong> 3 ê³¼ì •ì¤‘ ì‹¤íŒ¨í•˜ë©´ <code class="language-plaintext highlighter-rouge">Result</code>ë¥¼ ì‹¤íŒ¨ë¡œ ë³´ë‚´ì</li>
  <li><strong>5:</strong> T ì¸ìŠ¤í„´ìŠ¤ê°€ ì˜ ìƒì„±ë˜ì—ˆë‹¤. ëŒë ¤ì£¼ì</li>
  <li><strong>6:</strong> ì´ê±´ ê·¸ëƒ¥ í†µì‹  ë¶€ë¶„ì—ì„œ ì‹¤íŒ¨.. ê·¸ëŒ€ë¡œ ì‹¤íŒ¨ë¡œ ëŒë ¤ì£¼ì</li>
</ul>

<blockquote>
  <p>3ì˜ ë¶€ë¶„ì€ <code class="language-plaintext highlighter-rouge">Alamofire.ResponseData</code>ë¡œ ë°›ì„ ê²½ìš° ì•ˆí•´ë„ ë˜ì§€ë§Œ ê·¸ëŸ¬ë©´ ë˜ <code class="language-plaintext highlighter-rouge">StatusCode</code> ë¶„ê¸° íƒ€ê³  ã…  ë²ˆê±°ë¡­ë‹¤</p>
</blockquote>

<p><br /></p>

<p>ì´ë ‡ê²Œ ë˜ë©´ ì¤€ë¹„ëŠ” ëë‚œë‹¤.</p>

<p><br /></p>

<hr />

<p><br /></p>

<h1 id="ì‚¬ìš©">ì‚¬ìš©</h1>

<p>í•˜ë‚˜ëŠ” <code class="language-plaintext highlighter-rouge">NSDictionary</code>, í•˜ë‚˜ëŠ” <code class="language-plaintext highlighter-rouge">ê°ì²´</code>ë¡œ ë°›ì•„ë³´ì</p>

<p>ìš°ì„  ê°„ë‹¨í•˜ê²Œ ì±”í”¼ì–¸ ë¦¬ìŠ¤íŠ¸ë¥¼ ê°€ì ¸ì˜¤ëŠ” API</p>

<p><br /></p>

<h3 id="nsdictionary-í´ë¡œì €ë¡œ-ìš”ì²­">NSDictionary í´ë¡œì €ë¡œ ìš”ì²­</h3>

<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// ì •ì˜</span>
<span class="k">let</span> <span class="nv">api</span> <span class="o">=</span> <span class="kt">API</span><span class="o">.</span><span class="n">getChampionList</span>

<span class="c1">// ìš”ì²­</span>
<span class="n">api</span><span class="o">.</span><span class="n">request</span> <span class="p">{</span> <span class="n">result</span> <span class="k">in</span>
    <span class="k">switch</span> <span class="n">result</span> <span class="p">{</span>
    <span class="k">case</span> <span class="o">.</span><span class="nf">success</span><span class="p">(</span><span class="k">let</span> <span class="nv">dict</span><span class="p">):</span>
        <span class="nf">print</span><span class="p">(</span><span class="n">dict</span><span class="p">)</span>
        
    <span class="k">case</span> <span class="o">.</span><span class="nf">failure</span><span class="p">(</span><span class="k">let</span> <span class="nv">e</span><span class="p">):</span>
        <span class="nf">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p><br /></p>

<p>êµ‰ì¥íˆ ì‹¬í”Œí•´ë³´ì¸ë‹¤!</p>

<p>ì•„ì£¼ ì¢‹ë‹¤ ã… </p>

<p>ì € <code class="language-plaintext highlighter-rouge">dict</code>ë¥¼ ì´ì œ ì›í•˜ëŠ”ëŒ€ë¡œ ì²˜ë¦¬ í•´ì£¼ë©´ ëœë‹¤.</p>

<p><br /></p>

<blockquote>
  <p>ì‹¤ì œ ì € APIëŠ” ì •ë§ ì—„ì²­ë‚˜ê²Œ ê¸¸ë‹¤. <br />
ê·¸ë˜ì„œ ë”°ë¡œ ì¶œë ¥ê°’ì€ ì•ˆë³´ì—¬ì£¼ê³ , <br />
ë‚˜ì¤‘ì— ë¡¤ í¬ìŠ¤íŒ…í• ë•Œ ì‚´í´ë³´ì. <br /></p>
</blockquote>

<p><br /></p>

<h3 id="genericì„-ì´ìš©í•œ-í´ë¡œì €ë¡œ-ìš”ì²­">Genericì„ ì´ìš©í•œ í´ë¡œì €ë¡œ ìš”ì²­</h3>

<p>ê°ì²´ë¡œ ë°›ì„ê±°ë‹ˆê¹ ê°ì²´ë¥¼ ì •ì˜ë¶€í„° í•´ë³´ì</p>

<p>ì´ë²ˆì— ì‚¬ìš©ë  APIëŠ” <code class="language-plaintext highlighter-rouge">ì†Œí™˜ì‚¬ ì •ë³´</code> ê°€ì ¸ì˜¤ê¸°ë‹¤.</p>

<p><br /></p>

<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">struct</span> <span class="kt">SummonerDTO</span><span class="p">:</span> <span class="kt">Codable</span> <span class="p">{</span>
    <span class="k">let</span> <span class="nv">id</span><span class="p">,</span> <span class="n">accountId</span><span class="p">,</span> <span class="n">puuid</span><span class="p">,</span> <span class="nv">name</span><span class="p">:</span> <span class="kt">String</span>
    <span class="k">let</span> <span class="nv">profileIconId</span><span class="p">,</span> <span class="n">revisionDate</span><span class="p">,</span> <span class="nv">summonerLevel</span><span class="p">:</span> <span class="kt">Int</span>
<span class="p">}</span>
</code></pre></div></div>

<p>ì´ë ‡ê²Œ ìƒê²¼ë‹¤!</p>

<blockquote>
  <p>ì‚¬ì‹¤ Codableê¹Œì§„ ë°›ì„ í•„ìš” ì—†ë‹¤, Decodableë§Œ í•´ì¤˜ë„ ëœë‹¤.</p>
</blockquote>

<p><br /></p>

<p>ì´ì œ ì‚¬ìš©í•´ë³´ì</p>

<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// ì‚¬ìš©</span>
<span class="k">let</span> <span class="nv">api</span> <span class="o">=</span> <span class="kt">API</span><span class="o">.</span><span class="nf">getUserInfo</span><span class="p">(</span><span class="nv">name</span><span class="p">:</span> <span class="n">name</span><span class="p">)</span>

<span class="n">api</span><span class="o">.</span><span class="nf">request</span><span class="p">(</span><span class="nv">dataType</span><span class="p">:</span> <span class="kt">SummonerDTO</span><span class="o">.</span><span class="k">self</span><span class="p">)</span> <span class="p">{</span> <span class="n">result</span> <span class="k">in</span>
    <span class="k">switch</span> <span class="n">result</span> <span class="p">{</span>
    <span class="k">case</span> <span class="o">.</span><span class="nf">success</span><span class="p">(</span><span class="k">let</span> <span class="nv">data</span><span class="p">):</span>
        <span class="nf">printSummonerInfo</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
    <span class="k">case</span> <span class="o">.</span><span class="nf">failure</span><span class="p">(</span><span class="k">let</span> <span class="nv">e</span><span class="p">):</span>
        <span class="nf">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="c1">// ...</span>
<span class="c1">// ì¶œë ¥</span>
<span class="kd">func</span> <span class="nf">printSummonerInfo</span><span class="p">(</span><span class="n">_</span> <span class="nv">summoner</span><span class="p">:</span> <span class="kt">SummonerDTO</span><span class="p">)</span> <span class="p">{</span>
    <span class="nf">print</span><span class="p">(</span><span class="s">"""
        ** ê²°ê³¼ **
        id: </span><span class="se">\(</span><span class="n">data</span><span class="o">.</span><span class="n">id</span><span class="se">)</span><span class="s">
        accountId: </span><span class="se">\(</span><span class="n">data</span><span class="o">.</span><span class="n">accountId</span><span class="se">)</span><span class="s">
        puuid: </span><span class="se">\(</span><span class="n">data</span><span class="o">.</span><span class="n">puuid</span><span class="se">)</span><span class="s">
        name: </span><span class="se">\(</span><span class="n">data</span><span class="o">.</span><span class="n">name</span><span class="se">)</span><span class="s">
        profileIconId: </span><span class="se">\(</span><span class="n">data</span><span class="o">.</span><span class="n">profileIconId</span><span class="se">)</span><span class="s">
        revisionDate: </span><span class="se">\(</span><span class="n">data</span><span class="o">.</span><span class="n">revisionDate</span><span class="se">)</span><span class="s">
        summonerLevel: </span><span class="se">\(</span><span class="n">data</span><span class="o">.</span><span class="n">summonerLevel</span><span class="se">)</span><span class="s">
        """</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div></div>

<p><br /></p>

<p><code class="language-plaintext highlighter-rouge">print</code>ë¶€ë¶„ì„ ì œì™¸í•˜ë©´ ì •ë§ ë­ ì—†ë‹¤.</p>

<p><code class="language-plaintext highlighter-rouge">API</code>ì •ì˜ì‹œ, <code class="language-plaintext highlighter-rouge">Associate Value</code>ë¡œ <code class="language-plaintext highlighter-rouge">name</code>ì„ ë‚´ ì•„ì´ë”” ë„£ì–´ì£¼ê³ </p>

<p>ìš”ì²­ì‹œ, ì–»ê³ ìí•˜ëŠ” ê°ì²´ íƒ€ì…(<code class="language-plaintext highlighter-rouge">SummonerDTO</code>)ì„ ë„£ì–´ì¤¬ë‹¤.</p>

<p><br /></p>

<p>ê·¸ë¦¬ê³¤, ê²°ê³¼ë¥¼ ì¶œë ¥ í•¨ìˆ˜ <code class="language-plaintext highlighter-rouge">printSummonerInfo</code>ì— ë„£ì–´ì¤¬ë‹¤.</p>

<p><br /></p>

<p>ê²°ê³¼ëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>** ê²°ê³¼ **
id: waVzd7W1xB47_2P650Jn67EO8iijoAoX6fOEdWqDQVvs0io
accountId: 8VOqFMdQDXwTKPsbSBg5wo08GjcaZlpUmjBs9aSHUn0ap8Y
puuid: ywGOQDCvN_7PsLZChEIyW-4c535T2w5Hi2WfB8E-uIeVpCuQZHT3LuuGIUQ9g7XX-dysavsFfHFtnA
name: 2ì„¸íŠ¸ì§¬ë½•2íƒ•ìŠ‰1
profileIconId: 4569
revisionDate: 1628400316000
summonerLevel: 274
</code></pre></div></div>

<p><br /></p>

<p>ê°œì¸ì ìœ¼ë¡  ì‚¬ìš©í•˜ê¸° ë„˜í¸í•˜ë‹¤ ìƒê°ëœë‹¤!</p>

<blockquote>
  <p>ë¬¼ë¡ ,, ë‚´ ì‚¬ìš© ë²”ìœ„ í•œë„ ë‚´ì—ì„œâ€¦</p>
</blockquote>

<p>ë!</p>
</div>
  <div class="share-page">
  <span style="float: left;">Share this on &rarr;&nbsp;&nbsp;</span>

  <!-- Twitter -->
  <a href="https://twitter.com/share" class="twitter-share-button" data-via="">Tweet</a>
  <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>

  <!-- Facebook -->
  <div class="fb-share-button" data-href="http://localhost:4000/swift/2021/08/16/swift-%E1%84%82%E1%85%A2%E1%84%80%E1%85%A1-%E1%84%8A%E1%85%B3%E1%84%82%E1%85%B3%E1%86%AB-Network-Request-%E1%84%89%E1%85%B3%E1%84%90%E1%85%A1%E1%84%8B%E1%85%B5%E1%86%AF(Moya-%E1%84%8E%E1%85%A1%E1%86%A8%E1%84%8B%E1%85%A1%E1%86%AB).html" data-layout="button_count" style="position: relative; top: -8px; left: 3px;"></div>
</div>

<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/sdk.js#xfbml=1&version=v2.6&appId=";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>

</div>


  
    
      
        
          
      
    
  
    
      
        
          
            
            <div class="panel-body">
              <h4>Related Posts</h4>
              <ul>
            
                <li class="relatedPost">
                  <a href="http://localhost:4000/swift/2022/02/21/Swift-RIBs%EB%A5%BC-%EC%93%B0%EA%B8%B0%EB%A1%9C-%EB%A7%88%EC%9D%8C-%EB%A8%B9%EC%9D%80-%EA%B0%9C%EC%9D%B8%EC%A0%81-%EC%9D%B4%EC%9C%A0.html">(Swift) RIBsë¥¼ ì“°ê¸°ë¡œ ë§ˆìŒ ë¨¹ì€ ê°œì¸ì  ì´ìœ </a>
                  
                    (Categories: <a href="/category/Swift">Swift</a>)
                  
                </li>
          
          
        
      
    
  
    
      
        
          
            
                <li class="relatedPost">
                  <a href="http://localhost:4000/swift/2022/02/06/Swift-Test-Double(%EB%B6%80%EC%A0%9C-Mock-&-Stub-&-SPY-%EC%9D%B4%EB%9F%B0%EA%B2%8C-%EB%AD%90%EC%A7%80-).html">(Swift) Test Doubleì´ë€ (á„‡á…®á„Œá…¦- Mock, Stub, SPY á„‹á…µá„…á…¥á†«á„€á…¦ á„†á…¯á„Œá…µ?)</a>
                  
                    (Categories: <a href="/category/Swift">Swift</a>)
                  
                </li>
          
          
        
      
    
  
    
      
        
          
      
    
  
    
      
        
          
      
    
  
    
      
        
          
      
    
  
    
      
        
          
            
                <li class="relatedPost">
                  <a href="http://localhost:4000/swift/2021/10/04/Swift-%E1%84%8B%E1%85%B5%E1%86%AF%E1%84%80%E1%85%B3%E1%86%B8-%E1%84%80%E1%85%A2%E1%86%A8%E1%84%8E%E1%85%A6.html">Swift - ì¼ê¸‰ ê°ì²´</a>
                  
                    (Categories: <a href="/category/Swift">Swift</a>)
                  
                </li>
          
          
        
      
    
  
    
      
        
          
      
    
  
    
      
        
          
      
    
  
    
      
        
          
            
                <li class="relatedPost">
                  <a href="http://localhost:4000/swift/2021/08/21/swift-LOL-API-(%EC%9D%B8%EC%8A%A4%ED%84%B4%EC%8A%A4-%EC%83%9D%EC%84%B1).html">Swift - JSON ë°ì´í„° ì‰½ê²Œ ëª¨ë¸ ë§Œë“¤ê¸°(feat. QuickType)</a>
                  
                    (Categories: <a href="/category/Swift">Swift</a>)
                  
                </li>
          
          
        
      
    
  
    
      
        
          
      
    
  
    
      
        
          
      
    
  
    
      
        
          
            
                <li class="relatedPost">
                  <a href="http://localhost:4000/swift/2021/08/08/swift-SPM-%E1%84%86%E1%85%A1%E1%86%AB%E1%84%83%E1%85%B3%E1%86%AF%E1%84%80%E1%85%B5(feat.-PropertyWrapper%E1%84%91%E1%85%A7%E1%86%AB).html">Swift - SPM ë§Œë“¤ê¸°(feat.  PropertyWrapperí¸)</a>
                  
                    (Categories: <a href="/category/Swift">Swift</a>)
                  
                </li>
          
          
        
      
    
  
    
      
        
          
            
                <li class="relatedPost">
                  <a href="http://localhost:4000/swift/2021/07/31/swift-SPM-%EB%A7%8C%EB%93%A4%EA%B8%B0.html">Swift - SPM ë§Œë“¤ê¸°</a>
                  
                    (Categories: <a href="/category/Swift">Swift</a>)
                  
                </li>
          
          
        
      
    
  
    
      
        
          
      
    
  
    
      
        
          
      
    
  
    
      
        
          
      
    
  
    
      
        
          
      
    
  
    
      
        
          
      
    
  
    
      
        
          
      
    
  
    
      
        
          
      
    
        
          
      
    
  
    
      
        
          
      
    
        
          
      
    
  
    
      
        
          
      
    
        
          
      
    
  
    
      
        
          
      
    
        
          
      
    
  
    
      
        
          
      
    
        
          
      
    
  
    
      
        
          
      
    
        
          
      
    
  
    
      
        
          
      
    
  
    
      
        
          
      
    
  
    
      
        
          
      
    
        
          
      
    
  
    
      
        
          
      
    
        
          
      
    
  
    
      
        
          
      
    
  
    
      
        
          
      
    
  
    
      
        
          
      
    
  
    
      
        
          
      
    
  
    
      
        
          
      
    
  
    
      
        
          
      
    
  
    
      
        
          
      
    
  
    
      
        
          
      
    
  
    
      
        
          
      
    
  
    
      
        
          
      
    
  
    
      
        
          
      
    
  
    
      
        
          
      
    
  
    
      
        
          
      
    
  
    
      
        
          
      
    
  
    
      
        
          
      
    
  
    
      
        
          
      
    
  
    
      
        
          
      
    
  
    
      
        
          
      
    
  
    
      
        
          
      
    
  
    
      
        
          
      
    
  
    
      
        
          
      
    
  
    
      
        
          
      
    
  
  
  </ul>
</div>


<div class="PageNavigation">
  
    <a class="prev" href="/project/2021/08/14/project-LOL-API-(%E1%84%86%E1%85%AE%E1%86%AB%E1%84%89%E1%85%A5-%E1%84%89%E1%85%A1%E1%86%AF%E1%84%91%E1%85%A7%E1%84%87%E1%85%A9%E1%84%80%E1%85%B5).html">&laquo; Project - LOL API (ë¬¸ì„œ ì‚´í´ë³´ê¸°)</a>
  
  
    <a class="next" href="/swift/2021/08/21/swift-LOL-API-(%EC%9D%B8%EC%8A%A4%ED%84%B4%EC%8A%A4-%EC%83%9D%EC%84%B1).html">Swift - JSON ë°ì´í„° ì‰½ê²Œ ëª¨ë¸ ë§Œë“¤ê¸°(feat. QuickType) &raquo;</a>
  
</div>

<div class="disqus-comments">
  <div id="disqus_thread"></div>
  <script type="text/javascript">
    /* <![CDATA[ */
    var disqus_shortname = "https-jiseobkim-github-io";
    var disqus_identifier = "http://localhost:4000_Swift - ë‚´ê°€ ì“°ëŠ” Network Request ìŠ¤íƒ€ì¼(Moya ì°©ì•ˆ)";
    var disqus_title = "Swift - ë‚´ê°€ ì“°ëŠ” Network Request ìŠ¤íƒ€ì¼(Moya ì°©ì•ˆ)";

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
    /* ]]> */
  </script>
</div>

        <footer>
          &copy; Jiseob Kim
          
            - <a href="https://github.com/JiSeobKim">https://github.com/JiSeobKim</a> - Powered by Jekyll.
          
          <div class="btn-github" style="float:right;">
            <iframe src="https://ghbtns.com/github-btn.html?user=agusmakmun&repo=agusmakmun.github.io&type=star&count=true" frameborder="0" scrolling="0" width="85" height="20px"></iframe>
            <iframe src="https://ghbtns.com/github-btn.html?user=agusmakmun&repo=agusmakmun.github.io&type=fork&count=true" frameborder="0" scrolling="0" width="85" height="20px"></iframe>
          </div>
        </footer>
      </div>
      <!-- end /.col-sm-8 -->
    </div>
    <!-- end /.container -->

    <!-- Bootstrap core JavaScript -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
    <script src="//code.jquery.com/jquery-migrate-1.2.1.min.js"></script>
    <script src="/static/js/bootstrap.min.js"></script>
    <script src="/static/js/super-search.js"></script>
    <script src="/static/js/thickbox-compressed.js"></script>
    <script src="/static/js/projects.js"></script>
  </body>
</html>

